<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>docker的安装</title>
    <url>/%E4%BA%91%E5%8E%9F%E7%94%9F/02_docker%E5%AE%89%E8%A3%85/</url>
    <content><![CDATA[<h1 id="docker&#x7684;&#x7F51;&#x7EDC;&#x5B89;&#x88C5;"><a href="#docker&#x7684;&#x7F51;&#x7EDC;&#x5B89;&#x88C5;" class="headerlink" title="docker&#x7684;&#x7F51;&#x7EDC;&#x5B89;&#x88C5;"></a>docker&#x7684;&#x7F51;&#x7EDC;&#x5B89;&#x88C5;</h1><h2 id="&#x7B2C;&#x4E00;&#x6B65;&#x3001;&#x627E;&#x5230;&#x963F;&#x91CC;&#x4E91;&#x7684;Docker-ce&#x4E0B;&#x8F7D;&#x6E90;"><a href="#&#x7B2C;&#x4E00;&#x6B65;&#x3001;&#x627E;&#x5230;&#x963F;&#x91CC;&#x4E91;&#x7684;Docker-ce&#x4E0B;&#x8F7D;&#x6E90;" class="headerlink" title="&#x7B2C;&#x4E00;&#x6B65;&#x3001;&#x627E;&#x5230;&#x963F;&#x91CC;&#x4E91;&#x7684;Docker-ce&#x4E0B;&#x8F7D;&#x6E90;"></a>&#x7B2C;&#x4E00;&#x6B65;&#x3001;&#x627E;&#x5230;&#x963F;&#x91CC;&#x4E91;&#x7684;Docker-ce&#x4E0B;&#x8F7D;&#x6E90;</h2><p><img src="/%E4%BA%91%E5%8E%9F%E7%94%9F/02_docker%E5%AE%89%E8%A3%85/image-20211227102829010.png" alt="image-20211227102829010"></p>
<span id="more"></span>

<h2 id="&#x7B2C;&#x4E8C;&#x6B65;&#x3001;&#x5C06;&#x6240;&#x6709;&#x7684;deb&#x6E90;&#x6CE8;&#x91CA;&#x6389;"><a href="#&#x7B2C;&#x4E8C;&#x6B65;&#x3001;&#x5C06;&#x6240;&#x6709;&#x7684;deb&#x6E90;&#x6CE8;&#x91CA;&#x6389;" class="headerlink" title="&#x7B2C;&#x4E8C;&#x6B65;&#x3001;&#x5C06;&#x6240;&#x6709;&#x7684;deb&#x6E90;&#x6CE8;&#x91CA;&#x6389;"></a>&#x7B2C;&#x4E8C;&#x6B65;&#x3001;&#x5C06;&#x6240;&#x6709;&#x7684;deb&#x6E90;&#x6CE8;&#x91CA;&#x6389;</h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">vi /etc/apt/sources.list</span><br><span class="line">deb [arch=amd64] https://mirrors.aliyun.com/docker-ce/linux/ubuntu focal stabl</span><br><span class="line"><span class="meta">#</span><span class="bash"> &#x53EA;&#x7559;&#x4E0B;aliyun&#x7684;&#x66F4;&#x65B0;&#x6E90;</span></span><br></pre></td></tr></table></figure>

<h2 id="&#x7B2C;&#x4E09;&#x6B65;&#x3001;&#x6309;&#x7167;&#x963F;&#x91CC;&#x6E90;&#x7ED9;&#x51FA;&#x7684;&#x624B;&#x518C;&#xFF0C;&#x66F4;&#x65B0;&#x5E76;&#x5B89;&#x88C5;docker-ce"><a href="#&#x7B2C;&#x4E09;&#x6B65;&#x3001;&#x6309;&#x7167;&#x963F;&#x91CC;&#x6E90;&#x7ED9;&#x51FA;&#x7684;&#x624B;&#x518C;&#xFF0C;&#x66F4;&#x65B0;&#x5E76;&#x5B89;&#x88C5;docker-ce" class="headerlink" title="&#x7B2C;&#x4E09;&#x6B65;&#x3001;&#x6309;&#x7167;&#x963F;&#x91CC;&#x6E90;&#x7ED9;&#x51FA;&#x7684;&#x624B;&#x518C;&#xFF0C;&#x66F4;&#x65B0;&#x5E76;&#x5B89;&#x88C5;docker-ce"></a>&#x7B2C;&#x4E09;&#x6B65;&#x3001;&#x6309;&#x7167;&#x963F;&#x91CC;&#x6E90;&#x7ED9;&#x51FA;&#x7684;&#x624B;&#x518C;&#xFF0C;&#x66F4;&#x65B0;&#x5E76;&#x5B89;&#x88C5;docker-ce</h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> step 1: &#x5B89;&#x88C5;&#x5FC5;&#x8981;&#x7684;&#x4E00;&#x4E9B;&#x7CFB;&#x7EDF;&#x5DE5;&#x5177;</span></span><br><span class="line">sudo apt-get update</span><br><span class="line">sudo apt-get -y install apt-transport-https ca-certificates curl software-properties-common</span><br><span class="line"><span class="meta">#</span><span class="bash"> step 2: &#x5B89;&#x88C5;GPG&#x8BC1;&#x4E66;</span></span><br><span class="line">curl -fsSL https://mirrors.aliyun.com/docker-ce/linux/ubuntu/gpg | sudo apt-key add -</span><br><span class="line"><span class="meta">#</span><span class="bash"> Step 3: &#x5199;&#x5165;&#x8F6F;&#x4EF6;&#x6E90;&#x4FE1;&#x606F;</span></span><br><span class="line">sudo add-apt-repository &quot;deb [arch=amd64] https://mirrors.aliyun.com/docker-ce/linux/ubuntu $(lsb_release -cs) stable&quot;</span><br><span class="line"><span class="meta">#</span><span class="bash"> Step 4: &#x66F4;&#x65B0;&#x5E76;&#x5B89;&#x88C5;Docker-CE</span></span><br><span class="line">sudo apt-get -y update</span><br><span class="line">sudo apt-get -y install docker-ce</span><br></pre></td></tr></table></figure>

<p>&#x5982;&#x679C;&#x662F;&#x914D;&#x7F6E;&#x6307;&#x5B9A;&#x7248;&#x672C;&#xFF0C;&#x5219;&#x9700;&#x8981;&#x6307;&#x5B9A;&#x7248;&#x672C;&#x53F7;</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> Step 1: &#x67E5;&#x627E;Docker-CE&#x7684;&#x7248;&#x672C;:</span></span><br><span class="line">apt-cache madison docker-ce</span><br><span class="line"><span class="meta">#</span><span class="bash">   docker-ce | 17.03.1~ce-0~ubuntu-xenial | https://mirrors.aliyun.com/docker-ce/linux/ubuntu xenial/stable amd64 Packages</span></span><br><span class="line"><span class="meta">#</span><span class="bash">   docker-ce | 17.03.0~ce-0~ubuntu-xenial | https://mirrors.aliyun.com/docker-ce/linux/ubuntu xenial/stable amd64 Packages</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Step 2: &#x5B89;&#x88C5;&#x6307;&#x5B9A;&#x7248;&#x672C;&#x7684;Docker-CE: (VERSION&#x4F8B;&#x5982;&#x4E0A;&#x9762;&#x7684;17.03.1~ce-0~ubuntu-xenial)</span></span><br><span class="line">apt-get -y install docker-ce=[VERSION]</span><br></pre></td></tr></table></figure>

<p>&#x67E5;&#x770B;&#x5B89;&#x88C5;&#x7684;&#x7248;&#x672C;</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> &#x67E5;&#x770B;&#x76F8;&#x5173;&#x7684;&#x7248;&#x672C;&#x4FE1;&#x606F;</span></span><br><span class="line">docker version</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> &#x67E5;&#x770B;docker&#x76F8;&#x5173;&#x4FE1;&#x606F;</span></span><br><span class="line">docker info</span><br></pre></td></tr></table></figure>

<h1 id="docker&#x65E0;&#x7F51;&#x7EDC;&#x73AF;&#x5883;&#x4E0B;&#x7684;&#x5B89;&#x88C5;"><a href="#docker&#x65E0;&#x7F51;&#x7EDC;&#x73AF;&#x5883;&#x4E0B;&#x7684;&#x5B89;&#x88C5;" class="headerlink" title="docker&#x65E0;&#x7F51;&#x7EDC;&#x73AF;&#x5883;&#x4E0B;&#x7684;&#x5B89;&#x88C5;"></a>docker&#x65E0;&#x7F51;&#x7EDC;&#x73AF;&#x5883;&#x4E0B;&#x7684;&#x5B89;&#x88C5;</h1><h2 id="&#x7B2C;&#x4E00;&#x6B65;&#x3001;&#x5148;&#x5C06;&#x5BF9;&#x5E94;&#x7684;&#x4E8C;&#x8FDB;&#x5236;docker&#x6587;&#x4EF6;&#x4E0A;&#x4F20;&#x5230;Linux&#x64CD;&#x4F5C;&#x7CFB;&#x7EDF;&#x7684;&#x6307;&#x5B9A;&#x76EE;&#x5F55;"><a href="#&#x7B2C;&#x4E00;&#x6B65;&#x3001;&#x5148;&#x5C06;&#x5BF9;&#x5E94;&#x7684;&#x4E8C;&#x8FDB;&#x5236;docker&#x6587;&#x4EF6;&#x4E0A;&#x4F20;&#x5230;Linux&#x64CD;&#x4F5C;&#x7CFB;&#x7EDF;&#x7684;&#x6307;&#x5B9A;&#x76EE;&#x5F55;" class="headerlink" title="&#x7B2C;&#x4E00;&#x6B65;&#x3001;&#x5148;&#x5C06;&#x5BF9;&#x5E94;&#x7684;&#x4E8C;&#x8FDB;&#x5236;docker&#x6587;&#x4EF6;&#x4E0A;&#x4F20;&#x5230;Linux&#x64CD;&#x4F5C;&#x7CFB;&#x7EDF;&#x7684;&#x6307;&#x5B9A;&#x76EE;&#x5F55;"></a>&#x7B2C;&#x4E00;&#x6B65;&#x3001;&#x5148;&#x5C06;&#x5BF9;&#x5E94;&#x7684;&#x4E8C;&#x8FDB;&#x5236;docker&#x6587;&#x4EF6;&#x4E0A;&#x4F20;&#x5230;Linux&#x64CD;&#x4F5C;&#x7CFB;&#x7EDF;&#x7684;&#x6307;&#x5B9A;&#x76EE;&#x5F55;</h2><p>&#x5728; &#x8FD9;&#x4E2A;&#x7F51;&#x5740;&#x53BB;&#x4E0B;&#x8F7D;docker&#x7684;&#x5305;&#xFF1B;</p>
<figure class="highlight docker"><table><tr><td class="code"><pre><span class="line">http://mirrors.aliyun.com/docker-ce/linux/static/stable/x86_64/</span><br></pre></td></tr></table></figure>

<p><img src="/%E4%BA%91%E5%8E%9F%E7%94%9F/02_docker%E5%AE%89%E8%A3%85/image-20211227224229460.png" alt="image-20211227224229460"></p>
<h2 id="&#x7B2C;&#x4E8C;&#x6B65;&#x3001;&#x89E3;&#x538B;&#x7F29;&#x6587;&#x4EF6;&#x5E76;&#x521B;&#x5EFA;docker&#x7EC4;"><a href="#&#x7B2C;&#x4E8C;&#x6B65;&#x3001;&#x89E3;&#x538B;&#x7F29;&#x6587;&#x4EF6;&#x5E76;&#x521B;&#x5EFA;docker&#x7EC4;" class="headerlink" title="&#x7B2C;&#x4E8C;&#x6B65;&#x3001;&#x89E3;&#x538B;&#x7F29;&#x6587;&#x4EF6;&#x5E76;&#x521B;&#x5EFA;docker&#x7EC4;"></a>&#x7B2C;&#x4E8C;&#x6B65;&#x3001;&#x89E3;&#x538B;&#x7F29;&#x6587;&#x4EF6;&#x5E76;&#x521B;&#x5EFA;docker&#x7EC4;</h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">root@ubuntu20:~/tools# tar xvf docker-19.03.15-binary-install.tar.gz</span><br><span class="line">root@ubuntu20:~/tools# ll</span><br><span class="line"><span class="meta">#</span><span class="bash"> &#x7136;&#x540E;&#x662F;&#x4E09;&#x4E2A;&#x670D;&#x52A1;&#x6587;&#x4EF6;</span></span><br><span class="line">-rw-r--r-- 1 root   root        647 Apr 11  2021 containerd.service</span><br><span class="line"><span class="meta">#</span><span class="bash"> &#x5B98;&#x65B9;&#x7684;&#x4E8C;&#x8FDB;&#x5236;&#x6587;&#x4EF6;</span></span><br><span class="line">-rw-r--r-- 1 root   root   62436240 Feb  5  2021 docker-19.03.15.tgz</span><br><span class="line">-rwxr-xr-x 1 root   root   16168192 Jun 24  2019 docker-compose-Linux-x86_64_1.24.1*</span><br><span class="line">-rwxr-xr-x 1 root   root       2709 Dec 31 09:24 docker-install.sh*</span><br><span class="line">-rw-r--r-- 1 root   root       1683 Apr 11  2021 docker.service</span><br><span class="line">-rw-r--r-- 1 root   root        197 Apr 11  2021 docker.socket</span><br><span class="line"><span class="meta">#</span><span class="bash"> &#x4E0B;&#x9762;&#x4E24;&#x4E2A;&#x6587;&#x4EF6;&#x662F;&#x7CFB;&#x7EDF;&#x53C2;&#x6570;&#x548C;&#x5185;&#x6838;&#x53C2;&#x6570;&#x7684;&#x4F18;&#x5316;</span></span><br><span class="line">-rw-r--r-- 1 root   root        454 Apr 11  2021 limits.conf</span><br><span class="line">-rw-r--r-- 1 root   root        257 Apr 11  2021 sysctl.conf</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> &#x521B;&#x5EFA;docker&#x7EC4;</span></span><br><span class="line">groupadd docker</span><br><span class="line">cat /etc/group</span><br><span class="line">docker:x:1001:</span><br></pre></td></tr></table></figure>

<h2 id="&#x7B2C;&#x4E09;&#x6B65;&#x3001;&#x901A;&#x8FC7;&#x81EA;&#x52A8;&#x5316;&#x811A;&#x672C;&#x5B89;&#x88C5;docker&#x7A0B;&#x5E8F;"><a href="#&#x7B2C;&#x4E09;&#x6B65;&#x3001;&#x901A;&#x8FC7;&#x81EA;&#x52A8;&#x5316;&#x811A;&#x672C;&#x5B89;&#x88C5;docker&#x7A0B;&#x5E8F;" class="headerlink" title="&#x7B2C;&#x4E09;&#x6B65;&#x3001;&#x901A;&#x8FC7;&#x81EA;&#x52A8;&#x5316;&#x811A;&#x672C;&#x5B89;&#x88C5;docker&#x7A0B;&#x5E8F;"></a>&#x7B2C;&#x4E09;&#x6B65;&#x3001;&#x901A;&#x8FC7;&#x81EA;&#x52A8;&#x5316;&#x811A;&#x672C;&#x5B89;&#x88C5;docker&#x7A0B;&#x5E8F;</h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line">DIR=`pwd`</span><br><span class="line">PACKAGE_NAME=&quot;docker-19.03.15.tgz&quot;</span><br><span class="line">DOCKER_FILE=${DIR}/${PACKAGE_NAME}</span><br><span class="line"><span class="meta">#</span><span class="bash"> centos&#x5B89;&#x88C5;docker&#x7A0B;&#x5E8F;&#x51FD;&#x6570;</span></span><br><span class="line">centos_install_docker(){</span><br><span class="line">  grep &quot;Kernel&quot; /etc/issue &amp;&gt; /dev/null</span><br><span class="line">  if [ $? -eq 0 ];then</span><br><span class="line">    /bin/echo  &quot;&#x5F53;&#x524D;&#x7CFB;&#x7EDF;&#x662F;`cat /etc/redhat-release`,&#x5373;&#x5C06;&#x5F00;&#x59CB;&#x7CFB;&#x7EDF;&#x521D;&#x59CB;&#x5316;&#x3001;&#x914D;&#x7F6E;docker-compose&#x4E0E;&#x5B89;&#x88C5;docker&quot; &amp;&amp; sleep 1</span><br><span class="line">    systemctl stop firewalld &amp;&amp; systemctl disable firewalld &amp;&amp; echo &quot;&#x9632;&#x706B;&#x5899;&#x5DF2;&#x5173;&#x95ED;&quot; &amp;&amp; sleep 1</span><br><span class="line">    systemctl stop NetworkManager &amp;&amp; systemctl disable NetworkManager &amp;&amp; echo &quot;NetworkManager&quot; &amp;&amp; sleep 1</span><br><span class="line">    sed -i &apos;s/SELINUX=enforcing/SELINUX=disabled/g&apos; /etc/sysconfig/selinux &amp;&amp; setenforce  0 &amp;&amp; echo &quot;selinux &#x5DF2;&#x5173;&#x95ED;&quot; &amp;&amp; sleep 1</span><br><span class="line">    \cp ${DIR}/limits.conf /etc/security/limits.conf</span><br><span class="line">    \cp ${DIR}/sysctl.conf /etc/sysctl.conf</span><br><span class="line"></span><br><span class="line">    /bin/tar xvf ${DOCKER_FILE}</span><br><span class="line">    \cp docker/*  /usr/bin</span><br><span class="line"></span><br><span class="line">    \cp containerd.service /lib/systemd/system/containerd.service</span><br><span class="line">    \cp docker.service  /lib/systemd/system/docker.service</span><br><span class="line">    \cp docker.socket /lib/systemd/system/docker.socket</span><br><span class="line"></span><br><span class="line">    \cp ${DIR}/docker-compose-Linux-x86_64_1.24.1 /usr/bin/docker-compose</span><br><span class="line"></span><br><span class="line">    groupadd docker &amp;&amp; useradd docker -g docker</span><br><span class="line">    id -u  test &amp;&gt; /dev/null</span><br><span class="line">    if [ $? -ne 0 ];then</span><br><span class="line">      useradd test</span><br><span class="line">      usermod test -G docker</span><br><span class="line">    fi</span><br><span class="line">    systemctl  enable containerd.service &amp;&amp; systemctl  restart containerd.service</span><br><span class="line">    systemctl  enable docker.service &amp;&amp; systemctl  restart docker.service</span><br><span class="line">    systemctl  enable docker.socket &amp;&amp; systemctl  restart docker.socket</span><br><span class="line">  fi</span><br><span class="line">}</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> ubuntu&#x5B89;&#x88C5;docker&#x7A0B;&#x5E8F;&#x51FD;&#x6570;</span></span><br><span class="line">ubuntu_install_docker(){</span><br><span class="line"><span class="meta">  #</span><span class="bash"> &#x5224;&#x65AD;&#x5F53;&#x524D;&#x7CFB;&#x7EDF;</span></span><br><span class="line">  grep &quot;Ubuntu&quot; /etc/issue &amp;&gt; /dev/null</span><br><span class="line"><span class="meta">  #</span><span class="bash"> &#x5224;&#x65AD;&#x6210;&#x529F;&#xFF0C;&#x662F;Ubuntu&#x7CFB;&#x7EDF;</span></span><br><span class="line">  if [ $? -eq 0 ];then</span><br><span class="line">    /bin/echo  &quot;&#x5F53;&#x524D;&#x7CFB;&#x7EDF;&#x662F;`cat /etc/issue`,&#x5373;&#x5C06;&#x5F00;&#x59CB;&#x7CFB;&#x7EDF;&#x521D;&#x59CB;&#x5316;&#x3001;&#x914D;&#x7F6E;docker-compose&#x4E0E;&#x5B89;&#x88C5;docker&quot; &amp;&amp; sleep 1</span><br><span class="line">    # &#x62F7;&#x8D1D;limits.conf&#x548C;sysctl.conf&#x4E24;&#x4E2A;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x3001;&#x914D;&#x7F6E;&#x5185;&#x6838;&#x4F18;&#x5316;</span><br><span class="line">    \cp ${DIR}/limits.conf /etc/security/limits.conf</span><br><span class="line">    \cp ${DIR}/sysctl.conf /etc/sysctl.conf</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">	#</span><span class="bash"> &#x89E3;&#x538B;&#x4E8C;&#x8FDB;&#x5236;&#x7684;docker&#x7A0B;&#x5E8F;</span></span><br><span class="line">    /bin/tar xvf ${DOCKER_FILE}</span><br><span class="line">    # &#x89E3;&#x538B;&#x597D;&#x7684;&#x6587;&#x4EF6;&#x590D;&#x5236;&#x5230;/usr/bin&#x76EE;&#x5F55;&#x4E0B;</span><br><span class="line">    \cp docker/*  /usr/bin</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">	#</span><span class="bash"> &#x590D;&#x5236;containerd.service&#x3001;docker.service&#x548C;docker.socket&#x6587;&#x4EF6;</span></span><br><span class="line">    \cp containerd.service /lib/systemd/system/containerd.service</span><br><span class="line">    \cp docker.service  /lib/systemd/system/docker.service</span><br><span class="line">    \cp docker.socket /lib/systemd/system/docker.socket</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">	#</span><span class="bash"> &#x590D;&#x5236;compose&#x5355;&#x673A;&#x7F16;&#x6392;&#x6587;&#x4EF6;</span></span><br><span class="line">    \cp ${DIR}/docker-compose-Linux-x86_64_1.24.1 /usr/bin/docker-compose</span><br><span class="line">    # &#x4E3A;&#x4E86;&#x9632;&#x6B62;&#x524D;&#x9762;&#x8D44;&#x6E90;&#x51B2;&#x7A81;&#xFF0C;&#x6700;&#x597D;&#x628A;&#x6587;&#x4EF6;&#x63CF;&#x8FF0;&#x7B26;&#x503C;&#x8BBE;&#x7F6E;&#x7684;&#x5927;&#x4E00;&#x70B9;&#xFF1B;</span><br><span class="line">    ulimit  -n 1000000</span><br><span class="line">    /bin/echo &quot;docker &#x5B89;&#x88C5;&#x5B8C;&#x6210;!&quot; &amp;&amp; sleep 1</span><br><span class="line">    # &#x5224;&#x65AD;&#x662F;&#x5426;&#x5B58;&#x5728;&#x666E;&#x901A;&#x7528;&#x6237;test&#xFF0C;&#x5426;&#x5219;&#x5C31;&#x6DFB;&#x52A0;&#x8BE5;&#x7528;&#x6237;&#xFF0C;&#x4E14;&#x52A0;&#x5165;&#x5230;docker&#x7EC4;&#x4E2D;&#x6765;</span><br><span class="line">    id -u test &amp;&gt; /dev/null</span><br><span class="line">    if [ $? -ne 0 ];then</span><br><span class="line">      groupadd  -r test</span><br><span class="line">      groupadd  -r docker</span><br><span class="line">      useradd -r -m -g test test</span><br><span class="line">      usermod test -G docker</span><br><span class="line">    fi</span><br><span class="line">    # &#x8BBE;&#x7F6E;&#x5F00;&#x673A;&#x542F;&#x52A8;&#x5404;&#x4E2A;&#x670D;&#x52A1;;docker.service&#x662F;&#x4E3B;&#x670D;&#x52A1;&#xFF0C;&#x4E3B;&#x670D;&#x52A1;&#x4F1A;&#x53BB;&#x8C03;&#x7528;containerd.service&#x670D;&#x52A1;&#x3002;</span><br><span class="line">    # &#x6700;&#x540E;&#x8FD8;&#x6709;&#x4E00;&#x4E2A;docker.socket&#x670D;&#x52A1;&#xFF0C;&#x542F;&#x52A8;&#x5373;&#x53EF;&#xFF1B;</span><br><span class="line">    systemctl  enable containerd.service &amp;&amp; systemctl  restart containerd.service</span><br><span class="line">    systemctl  enable docker.service &amp;&amp; systemctl  restart docker.service</span><br><span class="line">    systemctl  enable docker.socket &amp;&amp; systemctl  restart docker.socket</span><br><span class="line">    /bin/echo &quot;&#x7A0B;&#x5E8F;&#x5B89;&#x88C5;&#x5B8C;&#x6210;&quot;</span><br><span class="line">  fi</span><br><span class="line">}</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> &#x5224;&#x65AD;&#x7CFB;&#x7EDF;&#x5185;&#x6838;</span></span><br><span class="line">main(){</span><br><span class="line">  centos_install_docker</span><br><span class="line">  ubuntu_install_docker</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">main</span><br></pre></td></tr></table></figure>

<p>&#x5B89;&#x88C5;&#x622A;&#x56FE;&#x5982;&#x4E0B;&#xFF0C;&#x8FD9;&#x91CC;&#x6CA1;&#x6709;&#x8DD1;&#x8D77;&#x6765;&#xFF1B;</p>
<p><img src="/%E4%BA%91%E5%8E%9F%E7%94%9F/02_docker%E5%AE%89%E8%A3%85/image-20211228070855250.png" alt="image-20211228070855250"></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">root@ubuntu20:~/tools# su - test</span><br><span class="line"><span class="meta">#</span><span class="bash"> &#x666E;&#x901A;&#x7528;&#x6237;&#x53EF;&#x4EE5;&#x6B63;&#x5E38;&#x8BBF;&#x95EE;docker&#x4E86;</span></span><br><span class="line">test@ubuntu20:~$ docker version</span><br></pre></td></tr></table></figure>

<h2 id="&#x7B2C;&#x56DB;&#x6B65;&#x3001;&#x6DFB;&#x52A0;&#x955C;&#x50CF;&#x52A0;&#x901F;&#x5668;"><a href="#&#x7B2C;&#x56DB;&#x6B65;&#x3001;&#x6DFB;&#x52A0;&#x955C;&#x50CF;&#x52A0;&#x901F;&#x5668;" class="headerlink" title="&#x7B2C;&#x56DB;&#x6B65;&#x3001;&#x6DFB;&#x52A0;&#x955C;&#x50CF;&#x52A0;&#x901F;&#x5668;"></a>&#x7B2C;&#x56DB;&#x6B65;&#x3001;&#x6DFB;&#x52A0;&#x955C;&#x50CF;&#x52A0;&#x901F;&#x5668;</h2><p>&#x6211;&#x8FD9;&#x91CC;&#x4F7F;&#x7528;&#x963F;&#x91CC;&#x4E91;&#x7684;&#x955C;&#x50CF;&#x52A0;&#x901F;&#x5668;&#xFF0C;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x53BB;&#x963F;&#x91CC;&#x4E91;&#x5E73;&#x53F0;&#x7684;&#x5B98;&#x7F51;&#x4E0B;&#x627E;&#x5230;&#x955C;&#x50CF;&#x52A0;&#x901F;&#x5668;&#x7684;&#x914D;&#x7F6E;&#x5373;&#x53EF;&#xFF1B;</p>
<p><img src="/%E4%BA%91%E5%8E%9F%E7%94%9F/02_docker%E5%AE%89%E8%A3%85/image-20211228071538245.png" alt="image-20211228071538245"></p>
<p>&#x70B9;&#x51FB;&#x201C;&#x5BB9;&#x5668;&#x955C;&#x50CF;&#x670D;&#x52A1;&#x201D;&#xFF1B;</p>
<p><img src="/%E4%BA%91%E5%8E%9F%E7%94%9F/02_docker%E5%AE%89%E8%A3%85/image-20211228071625152.png" alt="image-20211228071625152"></p>
<p>&#x5728;&#x201C;&#x955C;&#x50CF;&#x52A0;&#x901F;&#x5668;&#x201D;&#x4E0B;&#x9762;&#x6709;&#x76F8;&#x5E94;&#x7684;&#x914D;&#x7F6E;&#xFF0C;&#x627E;&#x5230;&#x914D;&#x7F6E;&#x5373;&#x53EF;&#xFF1B;</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sudo mkdir -p /etc/docker</span><br><span class="line">sudo tee /etc/docker/daemon.json &lt;&lt;-&apos;EOF&apos;</span><br><span class="line">{</span><br><span class="line">  &quot;registry-mirrors&quot;: [&quot;https://s5nn5ki3.mirror.aliyuncs.com&quot;]</span><br><span class="line">}</span><br><span class="line">EOF</span><br><span class="line">sudo systemctl daemon-reload</span><br><span class="line">sudo systemctl restart docker</span><br></pre></td></tr></table></figure>

<p>&#x6700;&#x540E;&#x67E5;&#x770B;&#x914D;&#x7F6E;&#x60C5;&#x51B5;</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker info</span><br></pre></td></tr></table></figure>

<p><img src="/%E4%BA%91%E5%8E%9F%E7%94%9F/02_docker%E5%AE%89%E8%A3%85/image-20211228071737310.png" alt="image-20211228071737310"></p>
<p>&#x5728;&#x6700;&#x4E0B;&#x9762;&#x663E;&#x793A;&#x5DF2;&#x7ECF;&#x6DFB;&#x52A0;&#x6210;&#x529F;&#xFF1B;</p>
]]></content>
      <categories>
        <category>云原生</category>
      </categories>
      <tags>
        <tag>容器</tag>
        <tag>docker</tag>
      </tags>
  </entry>
  <entry>
    <title>docker的常用命令介绍</title>
    <url>/%E4%BA%91%E5%8E%9F%E7%94%9F/03_docker%E7%9A%84%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/</url>
    <content><![CDATA[<h2 id="&#x955C;&#x50CF;&#x7BA1;&#x7406;"><a href="#&#x955C;&#x50CF;&#x7BA1;&#x7406;" class="headerlink" title="&#x955C;&#x50CF;&#x7BA1;&#x7406;"></a>&#x955C;&#x50CF;&#x7BA1;&#x7406;</h2><h3 id="pull-&#x62C9;&#x53D6;&#x955C;&#x50CF;"><a href="#pull-&#x62C9;&#x53D6;&#x955C;&#x50CF;" class="headerlink" title="pull-&#x62C9;&#x53D6;&#x955C;&#x50CF;"></a>pull-&#x62C9;&#x53D6;&#x955C;&#x50CF;</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> &#x62C9;&#x53D6;&#x955C;&#x50CF;&#x5230;&#x672C;&#x5730;&#xFF0C;&#x9ED8;&#x8BA4;&#x4E3A;&#x516C;&#x7F51;&#x4ED3;&#x5E93;</span></span><br><span class="line">docker pull centos:centos7.9.2009</span><br></pre></td></tr></table></figure>

<span id="more"></span>

<h3 id="push-&#x63A8;&#x9001;&#x955C;&#x50CF;"><a href="#push-&#x63A8;&#x9001;&#x955C;&#x50CF;" class="headerlink" title="push-&#x63A8;&#x9001;&#x955C;&#x50CF;"></a>push-&#x63A8;&#x9001;&#x955C;&#x50CF;</h3><p>&#x5728;&#x955C;&#x50CF;&#x63A8;&#x9001;&#x524D;&#xFF0C;&#x5176;&#x5730;&#x5740;&#x4E00;&#x5B9A;&#x8981;&#x548C;&#x4ED3;&#x5E93;&#x5730;&#x5740;&#x76F8;&#x540C;&#xFF0C;&#x5982;commit&#x547D;&#x4EE4;&#x4E2D;&#x6307;&#x5B9A;&#x7684;&#x4ED3;&#x5E93;&#x5730;&#x5740;&#x4EE5;&#x53CA;&#x6807;&#x7B7E;&#x4E5F;&#x8981;&#x5339;&#x914D;&#xFF1B;</p>
<p>&#x8FD9;&#x91CC;&#x6211;&#x4EEC;&#x6CE8;&#x518C;&#x4E00;&#x4E2A;&#x516C;&#x7F51;&#x4ED3;&#x5E93;&#xFF1B;&#x5728;&#x516C;&#x7F51;dockerhub.com&#x4E0A;&#x9762;&#x6CE8;&#x518C;&#x4E00;&#x4E2A;&#x81EA;&#x5DF1;&#x7684;&#x8D26;&#x53F7;&#xFF0C;&#x7136;&#x540E;&#x5B9A;&#x4E49;&#x81EA;&#x5DF1;&#x7684;&#x4ED3;&#x5E93;&#x540D;&#x79F0;&#xFF0C;&#x8FD9;&#x91CC;&#x53F3;&#x8FB9;&#x5C31;&#x80FD;&#x544A;&#x8BC9;&#x4F60;&#x5982;&#x4F55;&#x53BB;&#x4E0A;&#x4F20;&#xFF1B;</p>
<p><img src="/%E4%BA%91%E5%8E%9F%E7%94%9F/03_docker%E7%9A%84%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/image-20211228212844547.png" alt="image-20211228212844547"></p>
<p>&#x56E0;&#x6B64;&#xFF0C;&#x8FD9;&#x91CC;&#x4E0A;&#x4F20;&#x4E4B;&#x524D;&#xFF0C;&#x9700;&#x8981;&#x901A;&#x8FC7;tag&#x53BB;&#x4FEE;&#x6539;&#x5730;&#x5740;&#x3001;&#x4ED3;&#x5E93;&#x540D;&#x79F0;&#x3001;&#x4EE5;&#x53CA;&#x6DFB;&#x52A0;&#x5BF9;&#x5E94;&#x6807;&#x7B7E;&#xFF1B;</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> &#x4FEE;&#x6539;image&#x540D;&#x79F0;</span></span><br><span class="line">docker tag harbor.test.com/linux50/centos:v1 burnov/linux_os:v1</span><br><span class="line">docker images  # &#x663E;&#x793A;&#x5982;&#x4E0B;&#x6240;&#x793A;</span><br><span class="line">REPOSITORY             TAG             IMAGE ID            CREATED             SIZE</span><br><span class="line">burnov/linux_os        v1              acd52105d2bd        14 hours ago        204MB</span><br></pre></td></tr></table></figure>

<p>&#x7136;&#x540E;&#xFF0C;&#x767B;&#x5F55;&#x81EA;&#x5DF1;&#x7684;dockerhub.com&#x7684;&#x8D26;&#x53F7;&#xFF1B;</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker login --username=&#x201C;&#x7528;&#x6237;&#x540D;&#x201D;</span><br><span class="line">Password: &#x201C;&#x5BC6;&#x7801;&#x201D;</span><br></pre></td></tr></table></figure>

<p>&#x6700;&#x540E;&#xFF0C;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;push&#x547D;&#x4EE4;&#x4E0A;&#x4F20;&#x955C;&#x50CF;&#x6587;&#x4EF6;&#xFF1B;</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker push burnov/linux_os:v1</span><br></pre></td></tr></table></figure>

<p>&#x8FD9;&#x6837;&#x5C31;&#x53EF;&#x4EE5;&#x4E0A;&#x4F20;&#x4E0A;&#x53BB;&#x4E86;&#x3002;&#x8FD9;&#x91CC;&#x9700;&#x8981;&#x6CE8;&#x610F;&#x7684;&#x662F;&#xFF0C;&#x4E4B;&#x540E;&#x6211;&#x4EEC;&#x6709;&#x4E86;&#x81EA;&#x5DF1;&#x7684;&#x4ED3;&#x5E93;&#x4EE5;&#x540E;&#xFF0C;&#x524D;&#x9762;&#x662F;&#x9700;&#x8981;&#x6DFB;&#x52A0;&#x81EA;&#x5DF1;&#x7684;&#x4ED3;&#x5E93;&#x57DF;&#x540D;&#x5730;&#x5740;&#x7684;&#xFF08;&#x6216;&#x8005;&#x662F;IP&#x5730;&#x5740;&#xFF09;&#xFF0C;&#x8FD9;&#x91CC;&#x9ED8;&#x8BA4;&#x5C31;&#x662F;docker.io&#x4E5F;&#x5C31;&#x662F;dockerhub.com&#x7684;&#x4ED3;&#x5E93;&#x5730;&#x5740;&#xFF1B;&#x4E0A;&#x4F20;&#x5B8C;&#x6210;&#x4EE5;&#x540E;&#x5982;&#x4E0B;&#x56FE;&#x6240;&#x793A;&#xFF1A;</p>
<p><img src="/%E4%BA%91%E5%8E%9F%E7%94%9F/03_docker%E7%9A%84%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/image-20211228213936939.png" alt="image-20211228213936939"></p>
<h3 id="search-&#x67E5;&#x627E;&#x955C;&#x50CF;"><a href="#search-&#x67E5;&#x627E;&#x955C;&#x50CF;" class="headerlink" title="search-&#x67E5;&#x627E;&#x955C;&#x50CF;"></a>search-&#x67E5;&#x627E;&#x955C;&#x50CF;</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> &#x901A;&#x8FC7;search&#x67E5;&#x627E;&#x955C;&#x50CF;&#x6587;&#x4EF6;</span></span><br><span class="line">docker search openjdk</span><br></pre></td></tr></table></figure>

<p><img src="/%E4%BA%91%E5%8E%9F%E7%94%9F/03_docker%E7%9A%84%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/image-20211228072115645.png" alt="image-20211228072115645"></p>
<p>&#x8FD9;&#x91CC;&#x662F;&#x4E0D;&#x663E;&#x793A;&#x955C;&#x50CF;&#x7684;tag&#x4FE1;&#x606F;&#x7684;&#xFF0C;&#x6240;&#x4EE5;&#x67E5;&#x627E;&#x955C;&#x50CF;&#x6700;&#x597D;&#x8FD8;&#x662F;&#x53BB;&#x5B98;&#x65B9;web&#x9875;&#x9762;&#x7684;&#x4ED3;&#x5E93;&#x67E5;&#x627E;&#x597D;&#x4E00;&#x70B9;&#xFF1B;</p>
<p>&#x5B98;&#x65B9;&#x4ED3;&#x5E93;&#x5730;&#x5740;&#xFF1A;<a href="https://dockerhub.com/">https://dockerhub.com</a></p>
<p><img src="/%E4%BA%91%E5%8E%9F%E7%94%9F/03_docker%E7%9A%84%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/image-20211228072328039.png" alt="image-20211228072328039"></p>
<p>&#x627E;&#x5230;&#x4F60;&#x6240;&#x9700;&#x8981;&#x7684;&#x5BB9;&#x5668;&#x955C;&#x50CF;&#xFF0C;&#x7136;&#x540E;&#x70B9;&#x51FB;&#x201C;Tags&#x201D;&#xFF0C;&#x62D6;&#x5230;&#x4E0B;&#x9762;&#xFF0C;&#x5219;&#x53EF;&#x4EE5;&#x770B;&#x5230;&#x81EA;&#x5DF1;&#x6240;&#x9700;&#x8981;&#x7684;&#x7248;&#x672C;&#xFF1B;</p>
<p><img src="/%E4%BA%91%E5%8E%9F%E7%94%9F/03_docker%E7%9A%84%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/image-20211228072432903.png" alt="image-20211228072432903"></p>
<p>&#x5DE6;&#x8FB9;&#x662F;&#x7248;&#x672C;&#x7684;tags&#x4FE1;&#x606F;&#xFF0C;&#x53F3;&#x8FB9;&#x662F;&#x4E0B;&#x8F7D;&#x547D;&#x4EE4;&#xFF0C;&#x53EF;&#x4EE5;&#x5C06;&#x53F3;&#x8FB9;&#x7684;&#x4E0B;&#x8F7D;&#x547D;&#x4EE4;&#x76F4;&#x63A5;&#x590D;&#x5236;&#x5230;&#x81EA;&#x5DF1;&#x7684;&#x64CD;&#x4F5C;&#x7CFB;&#x7EDF;&#xFF0C;&#x5219;&#x80FD;&#x6B63;&#x5E38;&#x4E0B;&#x8F7D;&#x5B89;&#x88C5;&#x5BB9;&#x5668;&#x4E86;&#xFF1B;</p>
<h3 id="image-&#x67E5;&#x770B;&#x672C;&#x5730;&#x955C;&#x50CF;"><a href="#image-&#x67E5;&#x770B;&#x672C;&#x5730;&#x955C;&#x50CF;" class="headerlink" title="image-&#x67E5;&#x770B;&#x672C;&#x5730;&#x955C;&#x50CF;"></a>image-&#x67E5;&#x770B;&#x672C;&#x5730;&#x955C;&#x50CF;</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker images</span><br></pre></td></tr></table></figure>

<p><img src="/%E4%BA%91%E5%8E%9F%E7%94%9F/03_docker%E7%9A%84%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/image-20211228073721395.png" alt="image-20211228073721395"></p>
<h3 id="commit-&#x751F;&#x6210;&#x955C;&#x50CF;"><a href="#commit-&#x751F;&#x6210;&#x955C;&#x50CF;" class="headerlink" title="commit-&#x751F;&#x6210;&#x955C;&#x50CF;"></a>commit-&#x751F;&#x6210;&#x955C;&#x50CF;</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker commit -a &quot;test test@xx.com&quot; -m &quot;&#x5907;&#x6CE8;&#x4FE1;&#x606F;&quot; &#x5BB9;&#x5668;id &#x4ED3;&#x5E93;&#x540D;&#xFF1A;tag</span><br><span class="line"><span class="meta">#</span><span class="bash"> -a = --author &#x8868;&#x793A;&#x4F5C;&#x8005;&#x4FE1;&#x606F;</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> -m = --message &#x8868;&#x793A;&#x5907;&#x6CE8;&#x4FE1;&#x606F;</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> &#x540E;&#x9762;&#x63A5;&#x5BB9;&#x5668;id</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> &#x6700;&#x540E;&#x662F;&#x4ED3;&#x5E93;&#x540D;&#x79F0;&#x52A0;&#x4E0A;tag&#x4FE1;&#x606F;&#xFF0C;&#x81EA;&#x5B9A;&#x4E49;&#x5C31;&#x53EF;&#x4EE5;&#x4E86;&#xFF1B;</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> &#x4F8B;&#x5982;</span></span><br><span class="line">docker commit -a &quot;test test@xx.com&quot; -m &quot;beizhu&quot; dde94b3427c5 harbor.test.com/linux50/centos:v1</span><br></pre></td></tr></table></figure>

<p><img src="/%E4%BA%91%E5%8E%9F%E7%94%9F/03_docker%E7%9A%84%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/image-20211228074744314.png" alt="image-20211228074744314"></p>
<p>&#x8FD9;&#x6837;&#x5C31;&#x80FD;&#x751F;&#x6210;&#x65B0;&#x7684;&#x955C;&#x50CF;&#x6587;&#x4EF6;&#x4E86;&#xFF1B;</p>
<h3 id="save-&#x4FDD;&#x5B58;&#x955C;&#x50CF;"><a href="#save-&#x4FDD;&#x5B58;&#x955C;&#x50CF;" class="headerlink" title="save-&#x4FDD;&#x5B58;&#x955C;&#x50CF;"></a>save-&#x4FDD;&#x5B58;&#x955C;&#x50CF;</h3><p>&#x8FD9;&#x91CC;&#x662F;&#x5C06;&#x955C;&#x50CF;&#x4FDD;&#x5B58;&#x51FA;&#x6765;&#xFF0C;&#x65B9;&#x4FBF;&#x79FB;&#x690D;&#x5230;&#x522B;&#x7684;Linux&#x64CD;&#x4F5C;&#x7CFB;&#x7EDF;&#x4E4B;&#x4E0A;&#x53BB;&#xFF1B;</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> &#x4FEE;&#x6539;&#x955C;&#x50CF;&#x5185;&#x5BB9;</span></span><br><span class="line">docker exec -it dde94b3427c5 bash</span><br><span class="line"><span class="meta">#</span><span class="bash"> &#x968F;&#x4FBF;&#x4FEE;&#x6539;&#x4E00;&#x70B9;&#x5185;&#x5BB9;</span></span><br><span class="line">vi test</span><br><span class="line"><span class="meta">#</span><span class="bash"> &#x9000;&#x51FA;&#x5BB9;&#x5668;&#xFF0C;&#x5C06;&#x5BB9;&#x5668;&#x901A;&#x8FC7;save&#x547D;&#x4EE4;&#x4FDD;&#x5B58;&#x4E3A;&#x56FA;&#x5B9A;&#x7684;&#x955C;&#x50CF;&#x6587;&#x4EF6;</span></span><br><span class="line">docker save centos:centos7.9.2009 &gt; /opt/centos-images.tar.gz</span><br><span class="line"><span class="meta">#</span><span class="bash"> &#x8FD9;&#x91CC;&#x7684; &gt; &#x7B26;&#x53F7;&#x548C; -o &#x7684;&#x53C2;&#x6570;&#x662F;&#x76F8;&#x540C;&#x7684;&#xFF0C;&#x6240;&#x4EE5;&#x4E5F;&#x53EF;&#x4EE5;&#x5199;&#x6210;</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> docker save centos:centos7.9.2009 -o /opt/centos-images.tar.gz</span></span><br></pre></td></tr></table></figure>

<p>&#x8FD9;&#x6837;&#x5C31;&#x4F1A;&#x5728;/opt&#x76EE;&#x5F55;&#x4E0B;&#x751F;&#x6210;centos-images.tar.gz&#xFF0C;&#x7136;&#x540E;&#x901A;&#x8FC7;scp&#x62F7;&#x8D1D;&#x5230;&#x65B0;&#x7684;&#x64CD;&#x4F5C;&#x7CFB;&#x7EDF;&#x4E2D;&#x53BB;&#xFF1B;</p>
<h3 id="load-&#x52A0;&#x8F7D;&#x955C;&#x50CF;"><a href="#load-&#x52A0;&#x8F7D;&#x955C;&#x50CF;" class="headerlink" title="load-&#x52A0;&#x8F7D;&#x955C;&#x50CF;"></a>load-&#x52A0;&#x8F7D;&#x955C;&#x50CF;</h3><p>&#x901A;&#x8FC7;scp&#x547D;&#x4EE4;&#x83B7;&#x53D6;&#x5230;save&#x751F;&#x6210;&#x7684;tar.gz&#x6587;&#x4EF6;&#x540E;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;load&#x547D;&#x4EE4;&#x6765;&#x5728;&#x65B0;&#x7684;&#x673A;&#x5668;&#x4E0A;&#x542F;&#x52A8;&#x5BB9;&#x5668;&#xFF1B;</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> &#x6839;&#x636E;tar.gz&#x6587;&#x4EF6;&#x542F;&#x52A8;&#x5BB9;&#x5668;</span></span><br><span class="line">docker load &lt; centos-images.tar.gz</span><br><span class="line"><span class="meta">#</span><span class="bash"> &#x8FD9;&#x91CC;&#x7684; &lt; &#x548C;&#x53C2;&#x6570; -i &#x7684;&#x610F;&#x4E49;&#x662F;&#x76F8;&#x540C;&#x7684;&#xFF0C;&#x6240;&#x4EE5;&#x4E5F;&#x53EF;&#x4EE5;&#x5199;&#x6210;</span></span><br><span class="line">docker load -i centos images.tar.gz</span><br></pre></td></tr></table></figure>

<p>&#x8FD9;&#x6837;&#x5BB9;&#x5668;&#x5C31;&#x56DE;&#x5728;&#x672C;&#x673A;&#x5668;&#x4E0A;&#x8D77;&#x6765;&#xFF1B;</p>
<h3 id="tag-&#x4FEE;&#x6539;&#x955C;&#x50CF;&#x6807;&#x7B7E;&#x4FE1;&#x606F;"><a href="#tag-&#x4FEE;&#x6539;&#x955C;&#x50CF;&#x6807;&#x7B7E;&#x4FE1;&#x606F;" class="headerlink" title="tag-&#x4FEE;&#x6539;&#x955C;&#x50CF;&#x6807;&#x7B7E;&#x4FE1;&#x606F;"></a>tag-&#x4FEE;&#x6539;&#x955C;&#x50CF;&#x6807;&#x7B7E;&#x4FE1;&#x606F;</h3><p>&#x5982;&#x547D;&#x4EE4;push&#x4E0A;&#x6240;&#x8FF0;&#xFF0C;&#x5728;&#x4E0A;&#x4F20;&#x955C;&#x50CF;&#x7684;&#x65F6;&#x5019;&#x9700;&#x8981;&#x901A;&#x8FC7;tag&#x6765;&#x4FEE;&#x6539;&#x955C;&#x50CF;&#x540D;&#x79F0;&#x548C;&#x6807;&#x7B7E;&#xFF1B;&#x57FA;&#x672C;&#x683C;&#x5F0F;&#x5982;&#x4E0B;&#xFF1A;</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker tag SOURCE_IMAGE[:TAG] TARGET_IMAGE[:TAG]</span><br></pre></td></tr></table></figure>

<p>&#x552F;&#x4E00;&#x9700;&#x8981;&#x6CE8;&#x610F;&#x7684;&#x662F;&#xFF0C;&#x9ED8;&#x8BA4;&#x524D;&#x9762;&#x7684;&#x4ED3;&#x5E93;&#x5730;&#x5740;&#x4E3A;docker.io&#xFF0C;&#x6709;&#x65F6;&#x5019;&#x6211;&#x4EEC;&#x9700;&#x8981;&#x81EA;&#x5DF1;&#x6307;&#x5B9A;&#x4ED3;&#x5E93;&#x5730;&#x5740;&#xFF1B;</p>
<h3 id="rmi-&#x5220;&#x9664;&#x955C;&#x50CF;"><a href="#rmi-&#x5220;&#x9664;&#x955C;&#x50CF;" class="headerlink" title="rmi-&#x5220;&#x9664;&#x955C;&#x50CF;"></a>rmi-&#x5220;&#x9664;&#x955C;&#x50CF;</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker rmi nginx:alpine  # &#x5220;&#x9664;&#x955C;&#x50CF;&#x6587;&#x4EF6;</span><br></pre></td></tr></table></figure>

<h2 id="&#x5BB9;&#x5668;&#x7BA1;&#x7406;"><a href="#&#x5BB9;&#x5668;&#x7BA1;&#x7406;" class="headerlink" title="&#x5BB9;&#x5668;&#x7BA1;&#x7406;"></a>&#x5BB9;&#x5668;&#x7BA1;&#x7406;</h2><h3 id="run-&#x8FD0;&#x884C;&#x5BB9;&#x5668;"><a href="#run-&#x8FD0;&#x884C;&#x5BB9;&#x5668;" class="headerlink" title="run-&#x8FD0;&#x884C;&#x5BB9;&#x5668;"></a>run-&#x8FD0;&#x884C;&#x5BB9;&#x5668;</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> &#x8FD0;&#x884C;&#x5BB9;&#x5668;</span></span><br><span class="line">docker run -it --rm centos:centos7.9.2009</span><br><span class="line"><span class="meta">#</span><span class="bash"> -i i--&#x4EE5;&#x4EA4;&#x4E92;&#x5F0F;&#x5F62;&#x5F0F;&#x8FD0;&#x884C;&#x5BB9;&#x5668;</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> -t t--tty&#x7EC8;&#x7AEF;</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> --rm &#x5BB9;&#x5668;&#x9000;&#x51FA;&#x5219;&#x5220;&#x9664;&#xFF0C;&#x53EA;&#x8FD0;&#x884C;&#x4E00;&#x6B21;</span></span><br></pre></td></tr></table></figure>

<p><img src="/%E4%BA%91%E5%8E%9F%E7%94%9F/03_docker%E7%9A%84%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/image-20211228074000660.png" alt="image-20211228074000660"></p>
<p>&#x8FD9;&#x6837;&#x5C31;&#x53EF;&#x4EE5;&#x8FDB;&#x5165;&#x5230;&#x5BB9;&#x5668;&#x4E2D;&#x6765;&#xFF1B;</p>
<p>&#x5176;&#x4ED6;&#x76F8;&#x5173;docker run&#x7684;&#x53C2;&#x6570;</p>
<ul>
<li><p>-d &#x5BB9;&#x5668;&#x5728;&#x540E;&#x53F0;&#x8FD0;&#x884C;&#xFF0C;&#x4E0D;&#x5360;&#x7528;&#x5F53;&#x524D;&#x7684;tty&#x94FE;&#x63A5;&#xFF1B;</p>
</li>
<li><p>-P &#x6307;&#x5B9A;&#x6620;&#x5C04;&#x7AEF;&#x53E3;&#xFF0C;&#x5BB9;&#x5668;&#x5185;&#x90E8;&#x7684;&#x7AEF;&#x53E3;&#x968F;&#x673A;&#x6620;&#x5C04;&#x5230;&#x4E3B;&#x673A;&#x7684;&#x7AEF;&#x53E3;</p>
</li>
<li><p>-p &#x6307;&#x5B9A;&#x6620;&#x5C04;&#x7AEF;&#x53E3;&#xFF0C;&#x5C06;&#x672C;&#x5730;&#x7AEF;&#x53E3;&#x6620;&#x5C04;&#x4E3A;&#x5BB9;&#x5668;&#x7AEF;&#x53E3;</p>
</li>
<li><p>&#x2013;name=&#x201D;hostname&#x201D; &#x6216;&#x8005; -h &#x201C;hostname&#x201D; &#x6307;&#x5B9A;&#x4E00;&#x4E2A;&#x4E3B;&#x673A;&#x540D;&#xFF0C;&#x4E00;&#x822C;&#x5F88;&#x5C11;&#x6307;&#x5B9A;&#x4E3B;&#x673A;&#x540D;&#xFF0C;&#x90FD;&#x7528;&#x968F;&#x673A;ID</p>
</li>
<li><p>&#x2013;dns 8.8.8.8 &#x6307;&#x5B9A;&#x4E00;&#x4E2A;dns&#x670D;&#x52A1;&#x5668;</p>
</li>
<li><p>-e &#x53D8;&#x91CF;=&#x503C; &#x8FD9;&#x91CC;&#x662F;&#x8BBE;&#x7F6E;&#x73AF;&#x5883;&#x53D8;&#x91CF;</p>
</li>
<li><p>&#x2013;evn-file=  &#x8FD9;&#x662F;&#x4ECE;&#x6307;&#x5B9A;&#x6587;&#x4EF6;&#x6765;&#x8BFB;&#x53D6;&#x73AF;&#x5883;&#x53D8;&#x91CF;</p>
</li>
<li><p>-m &#x8BBE;&#x7F6E;&#x5BB9;&#x5668;&#x7684;&#x6700;&#x5927;&#x5185;&#x5B58;&#x503C;</p>
</li>
<li><p>-v &#x2013;volume &#x7ED9;&#x5BB9;&#x5668;&#x5185;&#x90E8;&#x76EE;&#x5F55;&#x6302;&#x8F7D;&#x4E00;&#x4E2A;&#x5916;&#x90E8;&#x7684;&#x76EE;&#x5F55;&#x5377;&#x5B58;&#x50A8;</p>
</li>
</ul>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker run --name mynginx -d nginx:alpine</span><br><span class="line">docker run -P -d nginx:alpine</span><br></pre></td></tr></table></figure>

<p><img src="/%E4%BA%91%E5%8E%9F%E7%94%9F/03_docker%E7%9A%84%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/image-20211228224605764.png" alt="image-20211228224605764"></p>
<p>&#x5982;&#x4E0A;&#x56FE;&#xFF0C;&#x4F7F;&#x7528; -P &#x53C2;&#x6570;&#x4F1A;&#x9ED8;&#x8BA4;&#x6620;&#x5C04;&#x4E00;&#x4E2A;&#x7AEF;&#x53E3;&#x51FA;&#x6765;&#xFF1B;</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker run -p 80:80 -v /data:/data -d nginx:latest</span><br><span class="line">docker run -p 127.0.0.1:80:8080/tcp ubuntu bash  # &#x8FD9;&#x91CC;127.0.0.1&#x6307;&#x5B9A;&#x5BBF;&#x4E3B;&#x673A;&#x5730;&#x5740;</span><br><span class="line">docker run -it nginx:latest /bin/bash  # &#x8FD9;&#x91CC;&#x9ED8;&#x8BA4;&#x901A;&#x8FC7;/bin/bash&#x7A0B;&#x5E8F;&#x6765;&#x767B;&#x5F55;&#x5BB9;&#x5668;</span><br></pre></td></tr></table></figure>

<h3 id="cp-&#x62F7;&#x8D1D;&#x6587;&#x4EF6;"><a href="#cp-&#x62F7;&#x8D1D;&#x6587;&#x4EF6;" class="headerlink" title="cp-&#x62F7;&#x8D1D;&#x6587;&#x4EF6;"></a>cp-&#x62F7;&#x8D1D;&#x6587;&#x4EF6;</h3><p>&#x8FD9;&#x4E2A;&#x53C2;&#x6570;&#x53EF;&#x4EE5;&#x5E2E;&#x52A9;&#x6211;&#x4EEC;&#x5C06;&#x5BB9;&#x5668;&#x5185;&#x90E8;&#x6587;&#x4EF6;&#x62F7;&#x8D1D;&#x51FA;&#x6765;&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x5C06;&#x5BBF;&#x4E3B;&#x673A;&#x7684;&#x6587;&#x4EF6;&#x62F7;&#x8D1D;&#x5230;&#x5BB9;&#x5668;&#x4E2D;&#x53BB;&#xFF1B;</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> &#x5C06;&#x5BB9;&#x5668;&#x4E2D;&#x7684;&#x6587;&#x4EF6;&#x62F7;&#x8D1D;&#x5230;&#x672C;&#x5730;&#x7684;/tmp&#x76EE;&#x5F55;&#x4E0B;</span></span><br><span class="line">docker cp 9cd3337e9b20:/etc/nginx/nginx.conf /tmp</span><br><span class="line"><span class="meta">#</span><span class="bash"> &#x5C06;&#x672C;&#x5730;&#x7684;&#x6587;&#x4EF6;&#x62F7;&#x8D1D;&#x5230;&#x5BB9;&#x5668;&#x4E2D;,&#x5982;&#x679C;&#x6709;&#x76F8;&#x540C;&#x7684;&#x6587;&#x4EF6;&#x5219;&#x8986;&#x76D6;</span></span><br><span class="line">Docker cp /tmp/nginx.conf 9cd3337e9b20:/etc/nginx/nginx.conf</span><br></pre></td></tr></table></figure>

<h3 id="create-&#x521B;&#x5EFA;&#x5BB9;&#x5668;"><a href="#create-&#x521B;&#x5EFA;&#x5BB9;&#x5668;" class="headerlink" title="create-&#x521B;&#x5EFA;&#x5BB9;&#x5668;"></a>create-&#x521B;&#x5EFA;&#x5BB9;&#x5668;</h3><p>&#x6307;&#x5B9A;&#x955C;&#x50CF;&#x521B;&#x5EFA;&#x5BB9;&#x5668;&#xFF0C;&#x4F46;&#x662F;&#x5BB9;&#x5668;&#x4E0D;&#x542F;&#x52A8;&#xFF0C;&#x8FD9;&#x4E2A;&#x547D;&#x4EE4;&#x57FA;&#x672C;&#x4E0A;&#x4E0D;&#x600E;&#x4E48;&#x4F7F;&#x7528;&#xFF1B;</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> &#x521B;&#x5EFA;&#x5BB9;&#x5668;</span></span><br><span class="line">docker create -it -p 81:80 nginx</span><br></pre></td></tr></table></figure>

<h3 id="exec-&#x8FDB;&#x5165;&#x5BB9;&#x5668;&#x6267;&#x884C;&#x547D;&#x540D;"><a href="#exec-&#x8FDB;&#x5165;&#x5BB9;&#x5668;&#x6267;&#x884C;&#x547D;&#x540D;" class="headerlink" title="exec-&#x8FDB;&#x5165;&#x5BB9;&#x5668;&#x6267;&#x884C;&#x547D;&#x540D;"></a>exec-&#x8FDB;&#x5165;&#x5BB9;&#x5668;&#x6267;&#x884C;&#x547D;&#x540D;</h3><p>&#x6211;&#x4EEC;&#x4E00;&#x822C;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;exec&#x7684;&#x547D;&#x4EE4;&#x6765;&#x8FDB;&#x5165;&#x5230;&#x8FD0;&#x884C;&#x7740;&#x7684;docker&#x5BB9;&#x5668;&#x4E2D;&#x6765;</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> &#x6307;&#x5B9A;&#x4F7F;&#x7528;sh&#x6216;&#x8005;bash&#x7A0B;&#x5E8F;&#x6765;&#x8FDB;&#x5165;&#x5BB9;&#x5668;&#xFF0C;&#x8FDB;&#x884C;&#x7BA1;&#x7406;</span></span><br><span class="line">docker exec 9cd3337e9b20 sh</span><br><span class="line">docker exec 9cd3337e9b20 bash</span><br></pre></td></tr></table></figure>

<h3 id="attach-&#x8FDB;&#x5165;&#x5BB9;&#x5668;"><a href="#attach-&#x8FDB;&#x5165;&#x5BB9;&#x5668;" class="headerlink" title="attach-&#x8FDB;&#x5165;&#x5BB9;&#x5668;"></a>attach-&#x8FDB;&#x5165;&#x5BB9;&#x5668;</h3><p>&#x5B83;&#x4E5F;&#x662F;&#x8FDB;&#x5165;&#x5230;&#x5BB9;&#x5668;&#x4E2D;&#x7684;&#x547D;&#x4EE4;&#x4F46;&#x662F;&#x5F88;&#x5C11;&#x4F7F;&#x7528;&#xFF1B;&#x8FDB;&#x5165;&#x5BB9;&#x5668;&#x540E;&#xFF0C;&#x522B;&#x4EBA;&#x5728;&#x5BB9;&#x5668;&#x4E2D;&#x7684;&#x64CD;&#x4F5C;&#x4F1A;&#x5B9E;&#x65F6;&#x540C;&#x6B65;&#xFF0C;&#x7C7B;&#x4F3C;&#x4E8E;tail -f&#x7684;&#x547D;&#x4EE4;&#xFF0C;&#x5728;&#x522B;&#x4EBA;&#x9000;&#x51FA;&#x4EE5;&#x540E;&#xFF0C;&#x8FD9;&#x4E2A;attach&#x5F00;&#x542F;&#x7684;&#x7EC8;&#x7AEF;&#x7A97;&#x53E3;&#x4E5F;&#x4F1A;&#x5173;&#x95ED;&#xFF1B;</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker attach 9cd3337e9b20</span><br></pre></td></tr></table></figure>

<h3 id="kill-&#x5173;&#x95ED;&#x5BB9;&#x5668;"><a href="#kill-&#x5173;&#x95ED;&#x5BB9;&#x5668;" class="headerlink" title="kill-&#x5173;&#x95ED;&#x5BB9;&#x5668;"></a>kill-&#x5173;&#x95ED;&#x5BB9;&#x5668;</h3><p>&#x5F3A;&#x5236;&#x5173;&#x95ED;&#x5BB9;&#x5668;&#xFF0C;&#x7ECF;&#x91CF;&#x5C11;&#x7528;&#xFF1B;</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker kill dde94b3427</span><br></pre></td></tr></table></figure>

<h3 id="stop-&#x505C;&#x6B62;&#x5BB9;&#x5668;"><a href="#stop-&#x505C;&#x6B62;&#x5BB9;&#x5668;" class="headerlink" title="stop-&#x505C;&#x6B62;&#x5BB9;&#x5668;"></a>stop-&#x505C;&#x6B62;&#x5BB9;&#x5668;</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker stop dde94b3427</span><br><span class="line"><span class="meta">#</span><span class="bash"> &#x505C;&#x6B62;&#x5BB9;&#x5668;&#x540E;&#xFF0C;&#x6211;&#x4EEC;&#x9700;&#x8981; docker ps -a &#x7684;&#x547D;&#x4EE4;&#x6765;&#x67E5;&#x770B;&#x6240;&#x6709;&#x5BB9;&#x5668;&#xFF0C;&#x624D;&#x80FD;&#x770B;&#x5230;&#xFF1B;</span></span><br></pre></td></tr></table></figure>

<p><img src="/%E4%BA%91%E5%8E%9F%E7%94%9F/03_docker%E7%9A%84%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/image-20211229094636263.png" alt="image-20211229094636263"></p>
<p>&#x8FD9;&#x91CC;&#x770B;&#x5230;&#x7684;&#x5BB9;&#x5668;&#x72B6;&#x6001;&#x5C31;&#x662F;&#x9000;&#x51FA;&#x7684;&#x72B6;&#x6001;&#x4E86;&#xFF1B;</p>
<h3 id="start-&#x542F;&#x52A8;&#x5BB9;&#x5668;"><a href="#start-&#x542F;&#x52A8;&#x5BB9;&#x5668;" class="headerlink" title="start-&#x542F;&#x52A8;&#x5BB9;&#x5668;"></a>start-&#x542F;&#x52A8;&#x5BB9;&#x5668;</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> &#x542F;&#x52A8;&#x5BB9;&#x5668;</span></span><br><span class="line">docker start dde94b3427</span><br></pre></td></tr></table></figure>

<h3 id="pause-&#x6682;&#x505C;&#x5BB9;&#x5668;"><a href="#pause-&#x6682;&#x505C;&#x5BB9;&#x5668;" class="headerlink" title="pause-&#x6682;&#x505C;&#x5BB9;&#x5668;"></a>pause-&#x6682;&#x505C;&#x5BB9;&#x5668;</h3><p>&#x8FD9;&#x4E2A;&#x547D;&#x4EE4;&#x5C31;&#x7C7B;&#x4F3C;&#x4E8E;&#x6211;&#x4EEC;&#x4F7F;&#x7528;vmworkstation&#x7684;&#x91CC;&#x9762;&#x201C;&#x6302;&#x8D77;&#x201D;&#x865A;&#x62DF;&#x673A;&#x4E00;&#x6837;&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x5C06;&#x5BB9;&#x5668;&#x6682;&#x505C;&#xFF1B;</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker pause 9cd3337e9b20</span><br></pre></td></tr></table></figure>

<p><img src="/%E4%BA%91%E5%8E%9F%E7%94%9F/03_docker%E7%9A%84%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/image-20211229094936359.png" alt="image-20211229094936359"></p>
<p>&#x8FD9;&#x91CC;&#x6211;&#x4EEC;&#x5C31;&#x53EF;&#x4EE5;&#x770B;&#x5230;&#x5BB9;&#x5668;&#x72B6;&#x6001;&#x4E3A;&#x6302;&#x8D77;&#x72B6;&#x6001;</p>
<h3 id="unpause-&#x53D6;&#x6D88;&#x6682;&#x505C;"><a href="#unpause-&#x53D6;&#x6D88;&#x6682;&#x505C;" class="headerlink" title="unpause-&#x53D6;&#x6D88;&#x6682;&#x505C;"></a>unpause-&#x53D6;&#x6D88;&#x6682;&#x505C;</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker unpause 9cd3337e9b20</span><br></pre></td></tr></table></figure>

<h3 id="rename-&#x4FEE;&#x6539;&#x5BB9;&#x5668;&#x540D;&#x79F0;"><a href="#rename-&#x4FEE;&#x6539;&#x5BB9;&#x5668;&#x540D;&#x79F0;" class="headerlink" title="rename-&#x4FEE;&#x6539;&#x5BB9;&#x5668;&#x540D;&#x79F0;"></a>rename-&#x4FEE;&#x6539;&#x5BB9;&#x5668;&#x540D;&#x79F0;</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> &#x767B;&#x5F55;&#x5BB9;&#x5668;&#x540E;&#xFF0C;&#x53EF;&#x4EE5;&#x770B;&#x5230;&#x5176;&#x4E3B;&#x673A;&#x540D;&#x4E3A;&#x5176;&#x968F;&#x673A;&#x751F;&#x6210;&#x7684;<span class="built_in">hash</span>&#x5B57;&#x7B26;&#x4E32;</span></span><br><span class="line">docker run -it --name centos-v1 centos:centos7.9.2009 bash</span><br><span class="line"><span class="meta">#</span><span class="bash"> &#x8FD9;&#x91CC;&#x542F;&#x52A8;&#x540E;&#x6307;&#x5B9A;&#x7684;&#x540D;&#x5B57;&#x4E3A;centos-v1</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> &#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;rename&#x547D;&#x4EE4;&#x4FEE;&#x6539;&#x5668;&#x5176;&#x5BB9;&#x5668;&#x540D;&#x79F0;</span></span><br><span class="line">docker rename b5bf2c2b8039 centos-test</span><br><span class="line">docker ps  # &#x8FD9;&#x91CC;&#x5C31;&#x53EF;&#x4EE5;&#x67E5;&#x770B;&#x6211;&#x4EEC;&#x65B0;&#x4FEE;&#x6539;&#x7684;&#x5BB9;&#x5668;&#x540D;&#x79F0;</span><br></pre></td></tr></table></figure>

<h3 id="update-&#x66F4;&#x65B0;&#x5BB9;&#x5668;&#x914D;&#x7F6E;"><a href="#update-&#x66F4;&#x65B0;&#x5BB9;&#x5668;&#x914D;&#x7F6E;" class="headerlink" title="update-&#x66F4;&#x65B0;&#x5BB9;&#x5668;&#x914D;&#x7F6E;"></a>update-&#x66F4;&#x65B0;&#x5BB9;&#x5668;&#x914D;&#x7F6E;</h3><p>&#x4F8B;&#x5982;&#xFF0C;&#x6211;&#x4EEC;&#x5728;&#x542F;&#x52A8;&#x5BB9;&#x5668;&#x7684;&#x65F6;&#x5019;&#x6307;&#x5B9A;&#x4E86;&#x8D44;&#x6E90;&#x9650;&#x5236;&#xFF0C;&#x4F7F;&#x5F97;&#x5185;&#x5B58;&#x5927;&#x5C0F;&#x53EA;&#x80FD;&#x4F7F;&#x7528;256M&#xFF0C;&#x4F46;&#x662F;&#x4E4B;&#x540E;&#x6211;&#x4EEC;&#x4F1A;&#x4FEE;&#x6539;&#x5176;&#x5185;&#x5B58;&#x5927;&#x5C0F;&#x4E3A;512M&#xFF0C;&#x8FD9;&#x6837;&#x5C31;&#x8981;&#x901A;&#x8FC7;update&#x547D;&#x4EE4;&#x6765;&#x8FDB;&#x884C;&#x6269;&#x5BB9;&#xFF1B;</p>
<p>&#x9700;&#x8981;&#x6CE8;&#x610F;&#x7684;&#x662F;&#xFF0C;&#x5982;&#x679C;&#x4F60;&#x5728;docker run&#x521B;&#x5EFA;&#x7684;&#x5BB9;&#x5668;&#x7684;&#x65F6;&#x5019;&#x5E76;&#x6CA1;&#x6709;&#x6307;&#x5B9A;&#x5185;&#x5B58;&#x5927;&#x5C0F;&#xFF0C;&#x5219;update&#x7684;&#x65F6;&#x5019;&#x4E5F;&#x662F;&#x4E0D;&#x80FD;&#x4FEE;&#x6539;&#x5176;&#x5185;&#x5B58;&#x5927;&#x5C0F;&#x7684;&#xFF1B;</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> &#x521B;&#x5EFA;&#x5BB9;&#x5668;</span></span><br><span class="line">docker run --memory 256M --name container -it -d nginx:alpine</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> &#x4FEE;&#x6539;&#x5176;&#x5185;&#x5B58;&#x5927;&#x5C0F;</span></span><br><span class="line">docker update --memory 512M container</span><br></pre></td></tr></table></figure>

<h3 id="rm-&#x5220;&#x9664;&#x5BB9;&#x5668;"><a href="#rm-&#x5220;&#x9664;&#x5BB9;&#x5668;" class="headerlink" title="rm-&#x5220;&#x9664;&#x5BB9;&#x5668;"></a>rm-&#x5220;&#x9664;&#x5BB9;&#x5668;</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> &#x5220;&#x9664;&#x5BB9;&#x5668;</span></span><br><span class="line">docker rm b5bf2c2b803 </span><br></pre></td></tr></table></figure>

<blockquote>
<p>&#x6CE8;&#x610F;&#xFF1A;&#x8FD0;&#x884C;&#x7740;&#x7684;&#x5BB9;&#x5668;&#x662F;&#x4E0D;&#x80FD;&#x591F;&#x88AB;&#x5220;&#x9664;&#x7684;&#x9664;&#x975E;&#x4F7F;&#x7528;-f&#x7684;&#x53C2;&#x6570;</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker rm -f b5bf2c2b803</span><br></pre></td></tr></table></figure>

<p>&#x6216;&#x8005;&#xFF0C;&#x6211;&#x4EEC;&#x901A;&#x8FC7;stop&#x547D;&#x4EE4;&#x5148;&#x505C;&#x6B62;&#x5BB9;&#x5668;&#xFF0C;&#x7136;&#x540E;&#x518D;&#x8FDB;&#x884C;&#x5220;&#x9664;</p>
</blockquote>
<h2 id="&#x4FE1;&#x606F;&#x67E5;&#x770B;"><a href="#&#x4FE1;&#x606F;&#x67E5;&#x770B;" class="headerlink" title="&#x4FE1;&#x606F;&#x67E5;&#x770B;"></a>&#x4FE1;&#x606F;&#x67E5;&#x770B;</h2><h3 id="ps-&#x67E5;&#x770B;&#x5F53;&#x524D;&#x8FD0;&#x884C;&#x7684;&#x5BB9;&#x5668;"><a href="#ps-&#x67E5;&#x770B;&#x5F53;&#x524D;&#x8FD0;&#x884C;&#x7684;&#x5BB9;&#x5668;" class="headerlink" title="ps-&#x67E5;&#x770B;&#x5F53;&#x524D;&#x8FD0;&#x884C;&#x7684;&#x5BB9;&#x5668;"></a>ps-&#x67E5;&#x770B;&#x5F53;&#x524D;&#x8FD0;&#x884C;&#x7684;&#x5BB9;&#x5668;</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> &#x67E5;&#x770B;&#x5BB9;&#x5668;&#x8FD0;&#x884C;&#x72B6;&#x6001;</span></span><br><span class="line">docker ps</span><br></pre></td></tr></table></figure>

<p><img src="/%E4%BA%91%E5%8E%9F%E7%94%9F/03_docker%E7%9A%84%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/image-20211229102056774.png" alt="image-20211229102056774"></p>
<p>&#x9ED8;&#x8BA4;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;docker ps&#x53EA;&#x4F1A;&#x67E5;&#x770B;&#x5230;&#x6240;&#x6709;&#x6B63;&#x5E38;&#x8FD0;&#x884C;&#x7684;&#x5BB9;&#x5668;&#xFF0C;&#x5982;&#x679C;&#x9700;&#x8981;&#x67E5;&#x770B;&#x6CA1;&#x6709;&#x8FD0;&#x884C;&#x7684;&#x5BB9;&#x5668;&#xFF0C;&#x9700;&#x8981;&#x52A0;&#x4E0A;&#x53C2;&#x6570;-a</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker ps -a</span><br></pre></td></tr></table></figure>

<h3 id="diff-&#x67E5;&#x770B;&#x5BB9;&#x5668;&#x53D8;&#x5316;"><a href="#diff-&#x67E5;&#x770B;&#x5BB9;&#x5668;&#x53D8;&#x5316;" class="headerlink" title="diff-&#x67E5;&#x770B;&#x5BB9;&#x5668;&#x53D8;&#x5316;"></a>diff-&#x67E5;&#x770B;&#x5BB9;&#x5668;&#x53D8;&#x5316;</h3><p>diff&#x53EF;&#x4EE5;&#x67E5;&#x770B;&#x5BB9;&#x5668;&#x4E2D;&#x7684;&#x914D;&#x7F6E;&#x53D8;&#x5316;</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker diff 3510d7df9da6</span><br></pre></td></tr></table></figure>

<p><img src="/%E4%BA%91%E5%8E%9F%E7%94%9F/03_docker%E7%9A%84%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/image-20211229102510714.png" alt="image-20211229102510714"></p>
<p>&#x5176;&#x4E2D;&#xFF0C;A-&#x4EE3;&#x8868;&#x662F;&#x6DFB;&#x52A0;&#x4E86;&#x7684;&#x6587;&#x4EF6;&#x6216;&#x76EE;&#x5F55;&#xFF1B;C-&#x4EE3;&#x8868;&#x662F;&#x4FEE;&#x6539;&#x4E86;&#x7684;&#x6587;&#x4EF6;&#x548C;&#x76EE;&#x5F55;&#xFF1B;D-&#x5219;&#x4EE3;&#x8868;&#x7684;&#x662F;&#x5220;&#x9664;&#x7684;&#x95EE;&#x4EF7;&#x548C;&#x76EE;&#x5F55;&#xFF1B;</p>
<h3 id="stats-&#x67E5;&#x770B;&#x5BB9;&#x5668;&#x76D1;&#x63A7;&#x4FE1;&#x606F;"><a href="#stats-&#x67E5;&#x770B;&#x5BB9;&#x5668;&#x76D1;&#x63A7;&#x4FE1;&#x606F;" class="headerlink" title="stats-&#x67E5;&#x770B;&#x5BB9;&#x5668;&#x76D1;&#x63A7;&#x4FE1;&#x606F;"></a>stats-&#x67E5;&#x770B;&#x5BB9;&#x5668;&#x76D1;&#x63A7;&#x4FE1;&#x606F;</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> &#x76D1;&#x63A7;&#x5BB9;&#x5668;&#x72B6;&#x6001;</span></span><br><span class="line">docker stats 3510d7df9da6</span><br></pre></td></tr></table></figure>

<p><img src="/%E4%BA%91%E5%8E%9F%E7%94%9F/03_docker%E7%9A%84%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/image-20211229102837659.png" alt="image-20211229102837659"></p>
<p>&#x8FD9;&#x4E2A;&#x547D;&#x4EE4;&#x7528;&#x6765;&#x76D1;&#x63A7;&#x5BB9;&#x5668;&#x7684;&#x72B6;&#x6001;&#xFF0C;&#x8FDB;&#x5165;&#x4E00;&#x4E2A;&#x4EA4;&#x4E92;&#x5F0F;&#x7684;&#x754C;&#x9762;&#xFF1B;&#x6BCF;&#x4E00;&#x79D2;&#x949F;&#x5C31;&#x4F1A;&#x5237;&#x65B0;&#x4E00;&#x6B21;&#xFF1B;&#x4F46;&#x662F;&#x518D;&#x4E91;&#x73AF;&#x5883;&#x4E0B;&#xFF0C;&#x6211;&#x4EEC;&#x4F1A;&#x4F7F;&#x7528;&#x76D1;&#x63A7;&#x7CFB;&#x7EDF;&#xFF0C;&#x6240;&#x4EE5;&#x4E0D;&#x518D;&#x4F7F;&#x7528;&#x8BE5;&#x547D;&#x4EE4;&#x4E86;&#xFF1B;</p>
<h3 id="logs-&#x67E5;&#x770B;&#x65E5;&#x5FD7;"><a href="#logs-&#x67E5;&#x770B;&#x65E5;&#x5FD7;" class="headerlink" title="logs-&#x67E5;&#x770B;&#x65E5;&#x5FD7;"></a>logs-&#x67E5;&#x770B;&#x65E5;&#x5FD7;</h3><p>&#x67E5;&#x770B;&#x6307;&#x5B9A;&#x5BB9;&#x5668;&#x7684;logs&#x65E5;&#x5FD7;&#x4FE1;&#x606F;&#xFF1B;</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker logs 3510d7df9da6</span><br></pre></td></tr></table></figure>

<p><img src="/%E4%BA%91%E5%8E%9F%E7%94%9F/03_docker%E7%9A%84%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/image-20211229103028312.png" alt="image-20211229103028312"></p>
<h3 id="events-&#x67E5;&#x770B;&#x65E5;&#x5FD7;"><a href="#events-&#x67E5;&#x770B;&#x65E5;&#x5FD7;" class="headerlink" title="events-&#x67E5;&#x770B;&#x65E5;&#x5FD7;"></a>events-&#x67E5;&#x770B;&#x65E5;&#x5FD7;</h3><p>docker events &#x67E5;&#x770B;&#x4E8B;&#x4EF6;&#x4FE1;&#x606F;&#xFF0C;&#x9700;&#x8981;&#x901A;&#x8FC7;-f&#x6307;&#x5B9A;&#x65E5;&#x5FD7;&#x6587;&#x4EF6;&#xFF1B;&#x5F88;&#x5C11;&#x4F7F;&#x7528;&#xFF1B;</p>
<h3 id="history-&#x67E5;&#x770B;&#x955C;&#x50CF;&#x7684;&#x5386;&#x53F2;&#x64CD;&#x4F5C;"><a href="#history-&#x67E5;&#x770B;&#x955C;&#x50CF;&#x7684;&#x5386;&#x53F2;&#x64CD;&#x4F5C;" class="headerlink" title="history-&#x67E5;&#x770B;&#x955C;&#x50CF;&#x7684;&#x5386;&#x53F2;&#x64CD;&#x4F5C;"></a>history-&#x67E5;&#x770B;&#x955C;&#x50CF;&#x7684;&#x5386;&#x53F2;&#x64CD;&#x4F5C;</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker history burnov/linux_os:v1</span><br></pre></td></tr></table></figure>

<p>&#x8FD9;&#x91CC;&#x6307;&#x5B9A;&#x7684;&#x662F;&#x5BF9;&#x955C;&#x50CF;&#x7684;&#x64CD;&#x4F5C;&#xFF0C;&#x4E0D;&#x8981;&#x5FD8;&#x8BB0;&#x4E86;&#x540E;&#x9762;&#x9700;&#x8981;&#x52A0;&#x4E0A;tag&#x4FE1;&#x606F;&#xFF1B;</p>
<p><img src="/%E4%BA%91%E5%8E%9F%E7%94%9F/03_docker%E7%9A%84%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/image-20211229103358518.png" alt="image-20211229103358518"></p>
<h3 id="info-&#x67E5;&#x770B;docker&#x4FE1;&#x606F;"><a href="#info-&#x67E5;&#x770B;docker&#x4FE1;&#x606F;" class="headerlink" title="info-&#x67E5;&#x770B;docker&#x4FE1;&#x606F;"></a>info-&#x67E5;&#x770B;docker&#x4FE1;&#x606F;</h3><p>docker info&#x63D0;&#x4F9B;&#x7684;&#x4FE1;&#x606F;&#x5982;&#x4E0B;</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker info</span><br><span class="line">Client:  # &#x5BA2;&#x6237;&#x7AEF;&#x4FE1;&#x606F;</span><br><span class="line"> Debug Mode: false</span><br><span class="line"></span><br><span class="line">Server:  # &#x670D;&#x52A1;&#x7AEF;&#x4FE1;&#x606F;</span><br><span class="line"> Containers: 3  # &#x5BB9;&#x5668;&#x6570;&#x91CF;</span><br><span class="line">  Running: 2  # &#x8FD0;&#x884C;&#x7740;&#x7684;&#x5BB9;&#x5668;&#x6570;&#x91CF;</span><br><span class="line">  Paused: 1  # &#x6302;&#x8D77;&#x7684;&#x5BB9;&#x5668;&#x6570;&#x91CF;</span><br><span class="line">  Stopped: 0  # &#x505C;&#x6B62;&#x7684;&#x5BB9;&#x5668;&#x6570;&#x91CF;</span><br><span class="line"> Images: 4  # &#x62E5;&#x6709;&#x7684;&#x955C;&#x50CF;&#x6570;&#x91CF;</span><br><span class="line"> Server Version: 19.03.15  # docker&#x670D;&#x52A1;&#x7AEF;&#x7684;&#x7248;&#x672C;&#x53F7;  </span><br><span class="line"> Storage Driver: overlay2  # &#x4F7F;&#x7528;&#x7684;&#x5B58;&#x50A8;&#x5F15;&#x64CE;--overlay2&#xFF0C;&#x65E9;&#x671F;&#x4E3A;device mapping&#x6216;&#x8005;AUFS&#x4EE5;&#x53CA;overlay;&#x73B0;&#x5728;&#x57FA;&#x672C;&#x4E0A;&#x5747;&#x4F7F;&#x7528;overlay2&#xFF0C;&#x4ED6;&#x662F;&#x5B9E;&#x73B0;&#x8054;&#x5408;&#x6302;&#x8F7D;&#x7684;&#x524D;&#x63D0;&#xFF01;&#xFF01;&#xFF01;</span><br><span class="line"><span class="meta"> #</span><span class="bash"> &#x5982;&#x679C;&#x4FEE;&#x6539;&#x8054;&#x5408;&#x6302;&#x8F7D;&#x65B9;&#x5F0F;&#xFF0C;&#x6240;&#x6709;&#x7684;&#x955C;&#x50CF;&#x6587;&#x4EF6;&#x4EE5;&#x53CA;&#x5BB9;&#x5668;&#x90FD;&#x4F1A;&#x88AB;&#x6E05;&#x7A7A;&#xFF01;&#x8FD9;&#x4E00;&#x70B9;&#x4E00;&#x5B9A;&#x8981;&#x6CE8;&#x610F;&#xFF1B;</span></span><br><span class="line">  Backing Filesystem: xfs  # &#x5E95;&#x5C42;&#x7684;&#x6587;&#x4EF6;&#x7CFB;&#x7EDF;</span><br><span class="line">  Supports d_type: true</span><br><span class="line">  Native Overlay Diff: true</span><br><span class="line"> Logging Driver: json-file  # &#x8BBE;&#x5907;&#x6587;&#x4EF6;&#x4FE1;&#x606F;&#x4E3A;json&#x6587;&#x4EF6;</span><br><span class="line"> Cgroup Driver: cgroupfs  # &#x8D44;&#x6E90;&#x9650;&#x5236;&#x901A;&#x8FC7;cgroupfs&#x7684;&#x65B9;&#x5F0F;&#x5B9E;&#x73B0;</span><br><span class="line"> Plugins:  # &#x63D2;&#x4EF6;</span><br><span class="line">  Volume: local  # &#x5377;-&#x672C;&#x5730;&#x5377;</span><br><span class="line">  Network: bridge host ipvlan macvlan null overlay  # &#x652F;&#x6301;&#x7684;&#x7F51;&#x7EDC;&#x94FE;&#x63A5;&#x65B9;&#x5F0F;&#xFF0C;&#x4EE5;&#x540E;&#x518D;&#x8BF4;</span><br><span class="line">  Log: awslogs fluentd gcplogs gelf journald json-file local logentries splunk syslog  # log&#x4FE1;&#x606F;</span><br><span class="line"> Swarm: inactive  # &#x4F7F;&#x7528;&#x7684;&#x9ED8;&#x8BA4;&#x7F16;&#x6392;&#x65B9;&#x5F0F;swarm&#xFF0C;&#x5DF2;&#x7ECF;&#x4E0D;&#x7528;&#x4E86;&#xFF1B;</span><br><span class="line"> Runtimes: runc  # docker&#x7684;&#x5E95;&#x5C42;&#x5F15;&#x64CE;&#x4E3A;&#x521B;&#x75DB;&#x7684;runc&#x65B9;&#x5F0F;</span><br><span class="line"> Default Runtime: runc </span><br><span class="line"> Init Binary: docker-init </span><br><span class="line"> containerd version: ea765aba0d05254012b0b9e595e995c09186427f  # containerd&#x7248;&#x672C;&#x4FE1;&#x606F;</span><br><span class="line"> runc version: dc9208a3303feef5b3839f4323d9beb36df0a9dd  # runc&#x7248;&#x672C;&#x4FE1;&#x606F;</span><br><span class="line"> init version: fec3683  # init&#x7248;&#x672C;&#x4FE1;&#x606F;</span><br><span class="line"> Security Options:  # &#x5B89;&#x5168;&#x9009;&#x9879;</span><br><span class="line">  apparmor</span><br><span class="line">  seccomp</span><br><span class="line">   Profile: default</span><br><span class="line"> Kernel Version: 5.4.0-81-generic  # &#x672C;&#x673A;&#x7684;&#x5185;&#x6838;&#x7248;&#x672C;</span><br><span class="line"> Operating System: Ubuntu 20.04.3 LTS  # &#x672C;&#x673A;&#x7684;&#x64CD;&#x4F5C;&#x7CFB;&#x7EDF;</span><br><span class="line"> OSType: linux  # &#x672C;&#x673A;&#x7684;&#x64CD;&#x4F5C;&#x7CFB;&#x7EDF;&#x7C7B;&#x578B;</span><br><span class="line"> Architecture: x86_64  # &#x672C;&#x673A;&#x7684;cpu&#x67B6;&#x6784;</span><br><span class="line"> CPUs: 2  # &#x672C;&#x673A;&#x7684;cpu&#x6838;&#x6570;</span><br><span class="line"> Total Memory: 1.913GiB  # &#x603B;&#x5171;&#x7684;&#x5185;&#x5B58;</span><br><span class="line"> Name: ubuntu20.04.3.example.com  # &#x672C;&#x673A;&#x7684;&#x4E3B;&#x673A;&#x540D;</span><br><span class="line"> ID: ATZR:3EPU:MJ7H:AE4P:2HZS:GISD:ZX6D:H4H3:JZUL:N2F4:CPKB:R6PM  # ID</span><br><span class="line"> Docker Root Dir: /var/lib/docker  # docker&#x7684;&#x6839;&#x76EE;&#x5F55;</span><br><span class="line"> Debug Mode: false  # debug&#x6A21;&#x5F0F;</span><br><span class="line"> Username: burnov  # &#x7528;&#x6237;&#x540D;</span><br><span class="line"> Registry: https://index.docker.io/v1/  # &#x9ED8;&#x8BA4;&#x6307;&#x5B9A;&#x7684;&#x5BB9;&#x5668;&#x4ED3;&#x5E93;</span><br><span class="line"> Labels:  # &#x6807;&#x7B7E;</span><br><span class="line"> Experimental: false</span><br><span class="line"> Insecure Registries:</span><br><span class="line">  127.0.0.0/8</span><br><span class="line"> Registry Mirrors:  # &#x4ED3;&#x5E93;&#x52A0;&#x901F;&#x5730;&#x5740;</span><br><span class="line">  https://s5nn5ki3.mirror.aliyuncs.com/</span><br><span class="line"> Live Restore Enabled: false</span><br><span class="line"> Product License: Community Engine</span><br></pre></td></tr></table></figure>

<h3 id="inspect-&#x67E5;&#x770B;&#x5BB9;&#x5668;&#x4FE1;&#x606F;"><a href="#inspect-&#x67E5;&#x770B;&#x5BB9;&#x5668;&#x4FE1;&#x606F;" class="headerlink" title="inspect-&#x67E5;&#x770B;&#x5BB9;&#x5668;&#x4FE1;&#x606F;"></a>inspect-&#x67E5;&#x770B;&#x5BB9;&#x5668;&#x4FE1;&#x606F;</h3><p>&#x67E5;&#x770B;&#x6307;&#x5B9A;&#x5BB9;&#x5668;&#x7684;&#x4FE1;&#x606F;</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker inspect &#x5BB9;&#x5668;id</span><br><span class="line"><span class="meta">#</span><span class="bash"> &#x518D;&#x8FD9;&#x4E2A;json&#x683C;&#x5F0F;&#x7684;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x4E0B;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x770B;&#x5230;&#x5BB9;&#x5668;&#x7684;&#x6240;&#x6709;&#x76F8;&#x5173;&#x914D;&#x7F6E;</span></span><br></pre></td></tr></table></figure>

<p><img src="/%E4%BA%91%E5%8E%9F%E7%94%9F/03_docker%E7%9A%84%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/image-20211229105726889.png" alt="image-20211229105726889"></p>
<p>&#x4E0B;&#x9762;&#x7684;&#x5185;&#x5BB9;&#x6BD4;&#x8F83;&#x591A;&#xFF0C;&#x6211;&#x4EEC;&#x5C31;&#x7701;&#x7565;&#x4E86;&#xFF1B;</p>
<h3 id="wait-&#x663E;&#x793A;&#x5BB9;&#x5668;&#x9000;&#x51FA;&#x4FE1;&#x606F;"><a href="#wait-&#x663E;&#x793A;&#x5BB9;&#x5668;&#x9000;&#x51FA;&#x4FE1;&#x606F;" class="headerlink" title="wait-&#x663E;&#x793A;&#x5BB9;&#x5668;&#x9000;&#x51FA;&#x4FE1;&#x606F;"></a>wait-&#x663E;&#x793A;&#x5BB9;&#x5668;&#x9000;&#x51FA;&#x4FE1;&#x606F;</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker wait 3510d7df9da6  # &#x8FDB;&#x5165;&#x5230;&#x5BB9;&#x5668;&#x4E2D;&#x6765;</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> &#x518D;&#x5F00;&#x4E00;&#x4E2A;&#x7A97;&#x53E3;&#xFF0C;&#x5173;&#x95ED;&#x8FD9;&#x4E2A;&#x5BB9;&#x5668;</span></span><br><span class="line">docker kill 3510d7df9da6</span><br></pre></td></tr></table></figure>

<p><img src="/%E4%BA%91%E5%8E%9F%E7%94%9F/03_docker%E7%9A%84%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/image-20211229105934186.png" alt="image-20211229105934186"></p>
<p>&#x6B64;&#x65F6;&#xFF0C;wait&#x7A97;&#x53E3;&#x5C31;&#x4F1A;&#x663E;&#x793A;&#x9000;&#x51FA;&#x539F;&#x56E0;&#x7684;&#x72B6;&#x6001;&#x7801;&#xFF0C;&#x8FD9;&#x4E2A;&#x4E5F;&#x4F7F;&#x7528;&#x8F83;&#x5C11;&#xFF1B;</p>
]]></content>
      <categories>
        <category>云原生</category>
      </categories>
      <tags>
        <tag>容器</tag>
        <tag>docker</tag>
      </tags>
  </entry>
  <entry>
    <title>harbor的单机部署</title>
    <url>/%E4%BA%91%E5%8E%9F%E7%94%9F/04_harbor%E7%9A%84%E5%8D%95%E6%9C%BA%E9%83%A8%E7%BD%B2/</url>
    <content><![CDATA[<h2 id="docker&#x4E0E;docker-compose&#x7684;&#x5B89;&#x88C5;"><a href="#docker&#x4E0E;docker-compose&#x7684;&#x5B89;&#x88C5;" class="headerlink" title="docker&#x4E0E;docker-compose&#x7684;&#x5B89;&#x88C5;"></a>docker&#x4E0E;docker-compose&#x7684;&#x5B89;&#x88C5;</h2><p>docker&#x7684;&#x5B89;&#x88C5;&#x8FD9;&#x91CC;&#x4E0D;&#x518D;&#x8D58;&#x8FF0;&#xFF1B;&#x6211;&#x4EEC;&#x4E3B;&#x8981;&#x770B;&#x4E00;&#x4E0B;compose&#x7684;&#x5B89;&#x88C5;&#xFF1B;&#xFF08;docker-compose&#x662F;docker&#x9879;&#x76EE;&#x7684;&#x5355;&#x673A;&#x7F16;&#x6392;&#x5DE5;&#x5177;&#xFF0C;&#x56E0;&#x4E3A;harbor&#x7684;&#x542F;&#x52A8;&#x662F;&#x57FA;&#x4E8E;&#x5404;&#x79CD;&#x5BB9;&#x5668;&#x7684;&#xFF0C;&#x6240;&#x4EE5;&#x6211;&#x4EEC;&#x9700;&#x8981;&#x5BF9;&#x8FD9;&#x4E9B;&#x5BB9;&#x5668;&#x8FDB;&#x884C;&#x5355;&#x673A;&#x7F16;&#x6392;&#x542F;&#x52A8;&#x4E0E;&#x7BA1;&#x7406;&#xFF09;</p>
<p>&#x9996;&#x5148;&#xFF0C;&#x5728;github&#x7684;&#x5B98;&#x7F51;&#x4E0A;&#x9762;&#x627E;&#x5230;compose&#x7684;&#x9879;&#x76EE;&#xFF1B;</p>
<span id="more"></span>

<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> &#x4E0B;&#x8F7D;docker-compose</span></span><br><span class="line">cd /opt/</span><br><span class="line">wget https://github.com/docker/compose/releases/download/v2.2.2/docker-compose-linux-x86_6</span><br><span class="line"><span class="meta">#</span><span class="bash"> &#x7ED9;docker-compose-Linux-x86_64&#x6743;&#x9650;&#xFF0C;&#x5B83;&#x4E0D;&#x7528;&#x5B89;&#x88C5;</span></span><br><span class="line">cp docker-compose-Linux-x86_64 /usr/bin/docker-compose</span><br><span class="line">chmod a+x /usr/bin/docker-compose</span><br><span class="line"><span class="meta">#</span><span class="bash"> &#x6D4B;&#x8BD5;</span></span><br><span class="line">docker-compose version</span><br></pre></td></tr></table></figure>

<p><img src="/%E4%BA%91%E5%8E%9F%E7%94%9F/04_harbor%E7%9A%84%E5%8D%95%E6%9C%BA%E9%83%A8%E7%BD%B2/image-20211229215313917.png" alt="image-20211229215313917"></p>
<p>&#x8FD9;&#x6837;&#x5C31;&#x5B89;&#x88C5;&#x5B8C;&#x6210;&#x4E86;&#xFF1B;</p>
<h2 id="&#x6DFB;&#x52A0;&#x5355;&#x72EC;&#x78C1;&#x76D8;&#x5E76;&#x8BBE;&#x7F6E;&#x5F00;&#x673A;&#x6302;&#x8F7D;"><a href="#&#x6DFB;&#x52A0;&#x5355;&#x72EC;&#x78C1;&#x76D8;&#x5E76;&#x8BBE;&#x7F6E;&#x5F00;&#x673A;&#x6302;&#x8F7D;" class="headerlink" title="&#x6DFB;&#x52A0;&#x5355;&#x72EC;&#x78C1;&#x76D8;&#x5E76;&#x8BBE;&#x7F6E;&#x5F00;&#x673A;&#x6302;&#x8F7D;"></a>&#x6DFB;&#x52A0;&#x5355;&#x72EC;&#x78C1;&#x76D8;&#x5E76;&#x8BBE;&#x7F6E;&#x5F00;&#x673A;&#x6302;&#x8F7D;</h2><p>&#x8FD9;&#x91CC;&#xFF0C;&#x6211;&#x4EEC;&#x63D0;&#x4F9B;&#x4E00;&#x4E2A;&#x5355;&#x72EC;&#x7684;&#x78C1;&#x76D8;&#x8DEF;&#x5F84;&#xFF0C;&#x4E4B;&#x540E;&#x7528;&#x6765;&#x5355;&#x72EC;&#x5B58;&#x653E;&#x955C;&#x50CF;&#x6587;&#x4EF6;&#xFF1B;&#x8FD9;&#x6837;&#xFF0C;&#x5373;&#x4F7F;&#x662F;&#x6211;&#x4EEC;&#x7684;&#x7CFB;&#x7EDF;&#x51FA;&#x73B0;&#x6545;&#x969C;&#x4EE5;&#x540E;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x91CD;&#x65B0;&#x5B89;&#x88C5;&#x64CD;&#x4F5C;&#x7CFB;&#x7EDF;&#xFF0C;&#x800C;&#x4E0D;&#x5F71;&#x54CD;&#x6211;&#x4EEC;&#x7684;&#x955C;&#x50CF;&#x6587;&#x4EF6;&#xFF1B;</p>
<p>&#x9996;&#x5148;&#xFF0C;&#x6211;&#x4EEC;&#x9700;&#x8981;&#x5173;&#x95ED;&#x865A;&#x62DF;&#x673A;&#xFF0C;&#x7136;&#x540E;&#x6DFB;&#x52A0;&#x78C1;&#x76D8;&#xFF1B;</p>
<p><img src="/%E4%BA%91%E5%8E%9F%E7%94%9F/04_harbor%E7%9A%84%E5%8D%95%E6%9C%BA%E9%83%A8%E7%BD%B2/image-20211229215553743.png" alt="image-20211229215553743"></p>
<p>&#x7136;&#x540E;&#xFF0C;&#x5BF9;&#x6DFB;&#x52A0;&#x7684;&#x78C1;&#x76D8;&#x8FDB;&#x884C;&#x683C;&#x5F0F;&#x5316;&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x5199;&#x5165;&#x6587;&#x4EF6;&#x7CFB;&#x7EDF;&#xFF1B;</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> &#x5199;&#x5165;&#x6587;&#x4EF6;&#x7CFB;&#x7EDF;</span></span><br><span class="line">mkfs.xfs /dev/sdb</span><br></pre></td></tr></table></figure>

<p>&#x6700;&#x540E;&#xFF0C;&#x6211;&#x4EEC;&#x5C06;&#x78C1;&#x76D8;&#x6302;&#x8F7D;&#x5728;&#x65B0;&#x5EFA;&#x7684;/data/harborimage&#x76EE;&#x5F55;&#x4E4B;&#x4E0B;&#x5373;&#x53EF;&#xFF1B;</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">mkdir -p /data/harborimage</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> &#x914D;&#x7F6E;&#x81EA;&#x52A8;&#x6302;&#x8F7D;</span></span><br><span class="line">vim /etc/fstab</span><br><span class="line">/dev/sdb /data/harborimage xfs defaults 0 0</span><br><span class="line">root@ubuntu20:/# df -TH</span><br><span class="line">Filesystem     Type      Size  Used Avail Use% Mounted on</span><br><span class="line">/dev/sdb       xfs        22G  184M   22G   1% /data/harborimage</span><br></pre></td></tr></table></figure>

<h2 id="&#x89E3;&#x538B;harbor&#x6587;&#x4EF6;&#x5E76;&#x4FEE;&#x6539;&#x914D;&#x7F6E;&#x6587;&#x4EF6;"><a href="#&#x89E3;&#x538B;harbor&#x6587;&#x4EF6;&#x5E76;&#x4FEE;&#x6539;&#x914D;&#x7F6E;&#x6587;&#x4EF6;" class="headerlink" title="&#x89E3;&#x538B;harbor&#x6587;&#x4EF6;&#x5E76;&#x4FEE;&#x6539;&#x914D;&#x7F6E;&#x6587;&#x4EF6;"></a>&#x89E3;&#x538B;harbor&#x6587;&#x4EF6;&#x5E76;&#x4FEE;&#x6539;&#x914D;&#x7F6E;&#x6587;&#x4EF6;</h2><p>&#x6211;&#x4EEC;&#x5C06;harbor&#x6587;&#x4EF6;&#x4E0A;&#x4F20;&#x5230;&#x7CFB;&#x7EDF;&#x4E4B;&#x4E0A;&#xFF1B;&#x7136;&#x540E;&#x5BF9;harbor&#x6587;&#x4EF6;&#x8FDB;&#x884C;&#x89E3;&#x538B;&#xFF0C;&#x8FD9;&#x91CC;&#x6211;&#x4EEC;&#x63D0;&#x4F9B;&#x7684;&#x79BB;&#x7EBF;&#x5305;&#x662F;2.3.2&#x7248;&#x672C;&#x7684;harbor&#x7A0B;&#x5E8F;&#xFF1B;</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> &#x89E3;&#x538B;harbor&#x62A5;&#x6587;</span></span><br><span class="line">tar vxf harbor-offline-installer-v2.3.2.tg</span><br></pre></td></tr></table></figure>

<p><img src="/%E4%BA%91%E5%8E%9F%E7%94%9F/04_harbor%E7%9A%84%E5%8D%95%E6%9C%BA%E9%83%A8%E7%BD%B2/image-20211229220645767.png" alt="image-20211229220645767"></p>
<p>&#x76EE;&#x5F55;&#x4E2D;&#x6709;&#x5982;&#x4E0B;&#x51E0;&#x4E2A;&#x6587;&#x4EF6;&#xFF0C;install.sh&#x662F;&#x6211;&#x4EEC;&#x7684;&#x5B89;&#x88C5;&#x6587;&#x4EF6;&#xFF0C;harbor.yml.tmpl&#x662F;&#x6211;&#x4EEC;&#x7684;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#xFF0C;&#x8FD9;&#x91CC;&#x6211;&#x4EEC;&#x76F4;&#x63A5;&#x4F7F;&#x7528;harbor.yml.tmpl&#x6587;&#x4EF6;&#x8FDB;&#x884C;&#x914D;&#x7F6E;&#x5373;&#x53EF;&#xFF1B;</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">cp harbor.yml.tmpl harbor.yml</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> &#x4FEE;&#x6539;&#x914D;&#x7F6E;&#x6587;&#x4EF6;</span></span><br><span class="line">vim harbor.yml</span><br><span class="line"><span class="meta">#</span><span class="bash"> &#x4FEE;&#x6539;&#x4E3B;&#x673A;&#x540D;</span></span><br><span class="line">hostname: harbor.test.com</span><br><span class="line"><span class="meta">#</span><span class="bash"> &#x4F7F;&#x7528;http&#x8FDB;&#x884C;&#x94FE;&#x63A5;&#xFF0C;&#x5927;&#x591A;&#x6570;&#x60C5;&#x51B5;&#x4E0B;&#x4F7F;&#x7528;&#x7684;&#x662F;http&#x7684;&#x94FE;&#x63A5;&#xFF1B;&#x56E0;&#x4E3A;https&#x4F1A;&#x6D88;&#x8017;&#x7CFB;&#x7EDF;&#x8D44;&#x6E90;&#xFF1B;</span></span><br><span class="line">http:</span><br><span class="line">  port: 80</span><br><span class="line"><span class="meta">#</span><span class="bash"> &#x6CE8;&#x91CA;&#x6389;https&#x8BC1;&#x4E66;&#x8BA4;&#x8BC1;&#x914D;&#x7F6E;</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> https:</span></span><br><span class="line"><span class="meta">  #</span><span class="bash"> https port <span class="keyword">for</span> harbor, default is 443</span></span><br><span class="line"><span class="meta">  #</span><span class="bash"> port: 443</span></span><br><span class="line"><span class="meta">  #</span><span class="bash"> The path of cert and key files <span class="keyword">for</span> nginx</span></span><br><span class="line"><span class="meta">  #</span><span class="bash"> certificate: /your/certificate/path</span></span><br><span class="line"><span class="meta">  #</span><span class="bash"> private_key: /your/private/key/path</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> &#x914D;&#x7F6E;admin&#x7528;&#x6237;&#x5BC6;&#x7801;&#xFF0C;&#x9ED8;&#x8BA4;&#x7528;&#x6237;&#x5C31;&#x662F;admin</span></span><br><span class="line">harbor_admin_password: 123456</span><br><span class="line"><span class="meta">#</span><span class="bash"> &#x6307;&#x5B9A;&#x5B58;&#x50A8;&#x955C;&#x50CF;&#x6587;&#x4EF6;&#x7684;&#x76EE;&#x5F55;</span></span><br><span class="line">data_volume: /data/harborimage</span><br></pre></td></tr></table></figure>

<h2 id="&#x5B89;&#x88C5;&#x5E76;&#x8BBF;&#x95EE;harbor"><a href="#&#x5B89;&#x88C5;&#x5E76;&#x8BBF;&#x95EE;harbor" class="headerlink" title="&#x5B89;&#x88C5;&#x5E76;&#x8BBF;&#x95EE;harbor"></a>&#x5B89;&#x88C5;&#x5E76;&#x8BBF;&#x95EE;harbor</h2><p>&#x5728;&#x914D;&#x7F6E;&#x5B8C;&#x6210;&#x4E86;&#x4EE5;&#x540E;&#xFF0C;&#x53EA;&#x9700;&#x8981;&#x901A;&#x8FC7;install&#x811A;&#x672C;&#x7A0B;&#x5E8F;&#x8FDB;&#x884C;&#x5B89;&#x88C5;&#x5373;&#x53EF;&#xFF1B;&#x547D;&#x4EE4;&#x5982;&#x4E0B;</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">./install.sh</span><br><span class="line"><span class="meta">#</span><span class="bash"> &#x6709;&#x4EE5;&#x4E0B;&#x4E09;&#x4E2A;&#x53C2;&#x6570;&#xFF1A;</span></span><br><span class="line">Please set --with-notary if needs enable Notary in Harbor, and set ui_url_protocol/ssl_cert/ssl_cert_key in harbor.yml bacause notary must run under https.  # &#x8FD9;&#x4E2A;&#x662F;&#x7528;&#x4E8E;&#x9A8C;&#x8BC1;&#x8BC1;&#x4E66;&#x7684;&#xFF0C;&#x9700;&#x8981;&#x5F00;&#x542F;https&#x7684;&#x670D;&#x52A1;&#xFF0C;&#x4F7F;&#x7528;&#x4E0D;&#x662F;&#x5F88;&#x591A;</span><br><span class="line">Please set --with-trivy if needs enable Trivy in Harbor  # &#x5F00;&#x542F;&#x626B;&#x63CF;&#x5668;&#xFF0C;&#x4E00;&#x822C;&#x4F1A;&#x6253;&#x5F00;</span><br><span class="line">Please set --with-chartmuseum if needs enable Chartmuseum in Harbor  # &#x5F00;&#x542F;&#x9ED8;&#x8BA4;&#x7684;&#x626B;&#x63CF;&#x5668;&#xFF0C;&#x4E00;&#x822C;&#x4E5F;&#x6253;&#x5F00;</span><br><span class="line"><span class="meta">#</span><span class="bash"> &#x6240;&#x4EE5;&#x547D;&#x4EE4;&#x4E5F;&#x53EF;&#x4EE5;&#x5F00;&#x542F;&#x540E;&#x9762;&#x4E24;&#x4E2A;&#x53C2;&#x6570;</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> ./install.sh --with-trivy --with-chartmuseum</span></span><br></pre></td></tr></table></figure>

<p><img src="/%E4%BA%91%E5%8E%9F%E7%94%9F/04_harbor%E7%9A%84%E5%8D%95%E6%9C%BA%E9%83%A8%E7%BD%B2/image-20211229221641039.png" alt="image-20211229221641039"></p>
<p>&#x7B49;&#x5F85;&#x5176;&#x4E0B;&#x8F7D;&#x5BF9;&#x5E94;&#x955C;&#x50CF;&#x6587;&#x4EF6;&#xFF0C;&#x5E76;&#x901A;&#x8FC7;docker-compose&#x4F9D;&#x6B21;&#x542F;&#x52A8;&#x5373;&#x53EF;&#xFF1B;</p>
<p><img src="/%E4%BA%91%E5%8E%9F%E7%94%9F/04_harbor%E7%9A%84%E5%8D%95%E6%9C%BA%E9%83%A8%E7%BD%B2/image-20211229221738840.png" alt="image-20211229221738840"></p>
<p>&#x5230;&#x6B64;&#x5219;&#x5BB9;&#x5668;&#x542F;&#x52A8;&#x5B8C;&#x6210;&#xFF1B;</p>
<p>&#x6700;&#x540E;&#xFF0C;&#x6211;&#x4EEC;&#x9700;&#x8981;&#x914D;&#x7F6E;&#x4E00;&#x4E0B;&#x57DF;&#x540D;&#x89E3;&#x6790;&#xFF0C;&#x5728;&#x4E4B;&#x524D;&#x7684;yml&#x7684;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x4E2D;&#xFF0C;&#x6211;&#x4EEC;&#x6307;&#x5B9A;&#x4E86;&#x57DF;&#x540D;&#x4E3A;harbor.test.com&#xFF0C;&#x6240;&#x4EE5;&#xFF0C;&#x6211;&#x4EEC;&#x8FD9;&#x91CC;&#x9700;&#x8981;&#x5728;/etc/hosts&#x6587;&#x4EF6;&#x4E0B;&#x9762;&#x914D;&#x7F6E;&#x5BF9;&#x5E94;&#x7684;&#x672C;&#x5730;&#x57DF;&#x540D;&#x89E3;&#x6790;&#xFF1B;</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">vim /etc/hosts</span><br><span class="line">192.168.169.20 harbor.test.com</span><br></pre></td></tr></table></figure>

<p>&#x4E5F;&#x5728;windows&#x7CFB;&#x7EDF;&#x4E2D;&#x914D;&#x7F6E;&#x4E00;&#x4E0B;&#x672C;&#x5730;&#x57DF;&#x540D;&#x89E3;&#x6790;&#xFF1B;</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> windows&#x914D;&#x7F6E;&#x7684;&#x76EE;&#x5F55;&#x5982;&#x4E0B;</span></span><br><span class="line">C:\Windows\System32\drivers\etc\hosts</span><br><span class="line">192.168.169.20  harbor.test.com</span><br></pre></td></tr></table></figure>

<p>&#x6B64;&#x65F6;&#x5C31;&#x53EF;&#x4EE5;&#x8BBF;&#x95EE;&#x5230;&#x4E3B;&#x754C;&#x9762;&#x4E86;&#xFF0C;&#x5982;&#x4E0B;&#x56FE;&#x6240;&#x793A;&#xFF1A;</p>
<p><img src="/%E4%BA%91%E5%8E%9F%E7%94%9F/04_harbor%E7%9A%84%E5%8D%95%E6%9C%BA%E9%83%A8%E7%BD%B2/image-20211229222247641.png" alt="image-20211229222247641"></p>
<p>&#x8F93;&#x5165;&#x7528;&#x6237;&#x540D;&#x548C;&#x5BC6;&#x7801;&#xFF0C;&#x5C31;&#x80FD;&#x767B;&#x5F55;&#x5230;harbor&#x955C;&#x50CF;&#x4ED3;&#x5E93;&#x4E86;&#xFF0C;&#x5982;&#x4E0B;&#x56FE;&#x6240;&#x793A;&#xFF1A;</p>
<p><img src="/%E4%BA%91%E5%8E%9F%E7%94%9F/04_harbor%E7%9A%84%E5%8D%95%E6%9C%BA%E9%83%A8%E7%BD%B2/image-20211229222412241.png" alt="image-20211229222412241"></p>
<h2 id="harbor&#x7684;&#x5E38;&#x89C1;&#x914D;&#x7F6E;&#x4ECB;&#x7ECD;"><a href="#harbor&#x7684;&#x5E38;&#x89C1;&#x914D;&#x7F6E;&#x4ECB;&#x7ECD;" class="headerlink" title="harbor&#x7684;&#x5E38;&#x89C1;&#x914D;&#x7F6E;&#x4ECB;&#x7ECD;"></a>harbor&#x7684;&#x5E38;&#x89C1;&#x914D;&#x7F6E;&#x4ECB;&#x7ECD;</h2><h3 id="&#x65B0;&#x5EFA;&#x9879;&#x76EE;"><a href="#&#x65B0;&#x5EFA;&#x9879;&#x76EE;" class="headerlink" title="&#x65B0;&#x5EFA;&#x9879;&#x76EE;"></a>&#x65B0;&#x5EFA;&#x9879;&#x76EE;</h3><p>&#x9879;&#x76EE;-&gt;&#x65B0;&#x5EFA;&#x9879;&#x76EE;</p>
<p><img src="/%E4%BA%91%E5%8E%9F%E7%94%9F/04_harbor%E7%9A%84%E5%8D%95%E6%9C%BA%E9%83%A8%E7%BD%B2/image-20211229222648893.png" alt="image-20211229222648893"></p>
<p>&#x5BBF;&#x5112;&#x9879;&#x76EE;&#x540D;&#x79F0;&#x3001;&#x6DFB;&#x52A0;&#x5B58;&#x50A8;&#x5BB9;&#x91CF;&#x5373;&#x53EF;&#xFF1B;&#x5982;&#x679C;&#x4E0D;&#x6DFB;&#x52A0;&#x5B58;&#x50A8;&#x5BB9;&#x91CF;&#x201C;-1&#x201D;&#x4E3A;&#x9ED8;&#x8BA4;&#x503C;&#xFF0C;&#x8FD9;&#x6837;&#x8FD9;&#x4E2A;&#x9879;&#x76EE;&#x4ED3;&#x5E93;&#x80FD;&#x591F;&#x4F7F;&#x7528;&#x7684;&#x5B58;&#x50A8;&#x5BB9;&#x91CF;&#x5C31;&#x4E0D;&#x4F1A;&#x88AB;&#x9650;&#x5236;&#xFF1B;</p>
<p>&#x4E00;&#x822C;&#x6765;&#x8BF4;&#x90FD;&#x662F;&#x4E00;&#x4E2A;&#x9879;&#x76EE;&#x4E00;&#x4E2A;&#x4ED3;&#x5E93;&#xFF1B;&#x3010;&#x4ED3;&#x5E93;&#x4E00;&#x822C;&#x90FD;&#x662F;&#x516C;&#x5F00;&#x7684;&#xFF0C;&#x5982;&#x679C;&#x662F;&#x79C1;&#x6709;&#x7684;&#xFF0C;&#x5219;&#x5FC5;&#x987B;&#x8981;&#x767B;&#x5F55;&#x8BA4;&#x8BC1;&#x6709;&#x6743;&#x9650;&#x4E0B;&#x8F7D;&#x624D;&#x884C;&#xFF1B;&#x3011;</p>
<h3 id="&#x521B;&#x5EFA;&#x7528;&#x6237;"><a href="#&#x521B;&#x5EFA;&#x7528;&#x6237;" class="headerlink" title="&#x521B;&#x5EFA;&#x7528;&#x6237;"></a>&#x521B;&#x5EFA;&#x7528;&#x6237;</h3><p>&#x7CFB;&#x7EDF;&#x7BA1;&#x7406;-&gt;&#x7528;&#x6237;&#x7BA1;&#x7406;-&gt;&#x521B;&#x5EFA;&#x7528;&#x6237;</p>
<p><img src="/%E4%BA%91%E5%8E%9F%E7%94%9F/04_harbor%E7%9A%84%E5%8D%95%E6%9C%BA%E9%83%A8%E7%BD%B2/image-20211229222843530.png" alt="image-20211229222843530"></p>
<p>harbor&#x662F;&#x57FA;&#x4E8E;&#x7528;&#x6237;&#x6388;&#x6743;&#x6765;&#x5BF9;&#x955C;&#x50CF;&#x8FDB;&#x884C;&#x7BA1;&#x7406;&#x7684;&#xFF0C;&#x8FD9;&#x91CC;&#x6211;&#x4EEC;&#x4E0A;&#x4F20;&#x955C;&#x50CF;&#x7684;&#x65F6;&#x5019;&#x4F1A;&#x8FDB;&#x4E00;&#x6B65;&#x8BF4;&#x660E;&#xFF1B;</p>
<h3 id="&#x65B0;&#x5EFA;&#x6807;&#x7B7E;"><a href="#&#x65B0;&#x5EFA;&#x6807;&#x7B7E;" class="headerlink" title="&#x65B0;&#x5EFA;&#x6807;&#x7B7E;"></a>&#x65B0;&#x5EFA;&#x6807;&#x7B7E;</h3><p>&#x7CFB;&#x7EDF;&#x7BA1;&#x7406;-&gt;&#x6807;&#x7B7E;-&gt;&#x65B0;&#x5EFA;&#x6807;&#x7B7E;</p>
<p><img src="/%E4%BA%91%E5%8E%9F%E7%94%9F/04_harbor%E7%9A%84%E5%8D%95%E6%9C%BA%E9%83%A8%E7%BD%B2/image-20211229223559684.png" alt="image-20211229223559684"></p>
<h3 id="&#x4FEE;&#x6539;&#x9879;&#x76EE;&#x5B58;&#x50A8;&#x7A7A;&#x95F4;"><a href="#&#x4FEE;&#x6539;&#x9879;&#x76EE;&#x5B58;&#x50A8;&#x7A7A;&#x95F4;" class="headerlink" title="&#x4FEE;&#x6539;&#x9879;&#x76EE;&#x5B58;&#x50A8;&#x7A7A;&#x95F4;"></a>&#x4FEE;&#x6539;&#x9879;&#x76EE;&#x5B58;&#x50A8;&#x7A7A;&#x95F4;</h3><p>&#x7CFB;&#x7EDF;&#x7BA1;&#x7406;-&gt;&#x9879;&#x76EE;&#x5B9A;&#x989D;-&gt;&#x9009;&#x4E2D;&#x9879;&#x76EE;-&gt;&#x4FEE;&#x6539;</p>
<p><img src="/%E4%BA%91%E5%8E%9F%E7%94%9F/04_harbor%E7%9A%84%E5%8D%95%E6%9C%BA%E9%83%A8%E7%BD%B2/image-20211229223657219.png" alt="image-20211229223657219"></p>
<p>&#x8FD9;&#x6837;&#x53EF;&#x4EE5;&#x4FEE;&#x6539;&#x9879;&#x76EE;&#x7684;&#x5B58;&#x50A8;&#x7A7A;&#x95F4;</p>
<h3 id="&#x5783;&#x573E;&#x6E05;&#x7406;"><a href="#&#x5783;&#x573E;&#x6E05;&#x7406;" class="headerlink" title="&#x5783;&#x573E;&#x6E05;&#x7406;"></a>&#x5783;&#x573E;&#x6E05;&#x7406;</h3><p>&#x7CFB;&#x7EDF;&#x7BA1;&#x7406;-&gt;&#x7ACB;&#x5373;&#x6E05;&#x7406;&#x5783;&#x573E;</p>
<p><img src="/%E4%BA%91%E5%8E%9F%E7%94%9F/04_harbor%E7%9A%84%E5%8D%95%E6%9C%BA%E9%83%A8%E7%BD%B2/image-20211229223821895.png" alt="image-20211229223821895"></p>
<p>&#x5BF9;&#x4E8E;&#x4E00;&#x4E9B;&#x65E0;&#x7528;&#x7684;&#x955C;&#x50CF;&#x6587;&#x4EF6;&#x8FDB;&#x884C;&#x6E05;&#x7406;&#xFF1B;&#x53EF;&#x4EE5;&#x6DFB;&#x52A0;&#x5B9A;&#x65F6;&#x4EFB;&#x52A1;&#xFF1A;</p>
<p><img src="/%E4%BA%91%E5%8E%9F%E7%94%9F/04_harbor%E7%9A%84%E5%8D%95%E6%9C%BA%E9%83%A8%E7%BD%B2/image-20211229224022194.png" alt="image-20211229224022194"></p>
<h3 id="&#x914D;&#x7F6E;&#x6CE8;&#x518C;"><a href="#&#x914D;&#x7F6E;&#x6CE8;&#x518C;" class="headerlink" title="&#x914D;&#x7F6E;&#x6CE8;&#x518C;"></a>&#x914D;&#x7F6E;&#x6CE8;&#x518C;</h3><p>&#x7CFB;&#x7EDF;&#x7BA1;&#x7406;-&gt;&#x914D;&#x7F6E;&#x7BA1;&#x7406;</p>
<p><img src="/%E4%BA%91%E5%8E%9F%E7%94%9F/04_harbor%E7%9A%84%E5%8D%95%E6%9C%BA%E9%83%A8%E7%BD%B2/image-20211231225245389.png" alt="image-20211231225245389"></p>
<p>&#x5F00;&#x542F;&#x7528;&#x6237;&#x81EA;&#x52A8;&#x6CE8;&#x518C;&#x7684;&#x529F;&#x80FD;&#xFF1B;</p>
<h3 id="&#x8BBE;&#x7F6E;&#x90AE;&#x4EF6;&#x901A;&#x544A;&#x670D;&#x52A1;"><a href="#&#x8BBE;&#x7F6E;&#x90AE;&#x4EF6;&#x901A;&#x544A;&#x670D;&#x52A1;" class="headerlink" title="&#x8BBE;&#x7F6E;&#x90AE;&#x4EF6;&#x901A;&#x544A;&#x670D;&#x52A1;"></a>&#x8BBE;&#x7F6E;&#x90AE;&#x4EF6;&#x901A;&#x544A;&#x670D;&#x52A1;</h3><p>&#x7CFB;&#x7EDF;&#x7BA1;&#x7406;-&gt;&#x914D;&#x7F6E;&#x7BA1;&#x7406;-&gt;&#x90AE;&#x7BB1;</p>
<p><img src="/%E4%BA%91%E5%8E%9F%E7%94%9F/04_harbor%E7%9A%84%E5%8D%95%E6%9C%BA%E9%83%A8%E7%BD%B2/image-20211231225932583.png" alt="image-20211231225932583"></p>
<blockquote>
<p>&#x6CE8;&#x610F;&#xFF1A;&#x8FD9;&#x91CC;&#x7684;&#x5BC6;&#x7801;&#x662F;&#x6388;&#x6743;&#x7801;&#xFF0C;&#x800C;&#x4E0D;&#x662F;&#x90AE;&#x7BB1;&#x5BC6;&#x7801;&#xFF1B;</p>
<p>qq&#x90AE;&#x7BB1;&#x8BBE;&#x7F6E;&#x4E2D;&#x627E;&#x5230;&#x5BF9;&#x5E94;&#x7684;&#x201D;POP3/IMAP/SMTP/Exchange/CardDAV/CalDAV&#x670D;&#x52A1;&#x201D;&#xFF0C;&#x7136;&#x540E;&#x5BF9;&#x5176;&#x8FDB;&#x884C;&#x8BBE;&#x7F6E;</p>
<p><img src="/%E4%BA%91%E5%8E%9F%E7%94%9F/04_harbor%E7%9A%84%E5%8D%95%E6%9C%BA%E9%83%A8%E7%BD%B2/image-20211231230426231.png" alt="image-20211231230426231"></p>
</blockquote>
<p>&#x5C06;&#x53D7;&#x5230;&#x7684;&#x7279;&#x6B8A;&#x7801;&#x590D;&#x5236;&#x5230;&#x5BC6;&#x7801;&#x5B57;&#x6BB5;&#x4E2D;&#xFF0C;&#x5373;&#x53EF;&#xFF1B;</p>
<h2 id="&#x4E0A;&#x4F20;&#x5E76;&#x4E0B;&#x8F7D;&#x955C;&#x50CF;&#x6587;&#x4EF6;"><a href="#&#x4E0A;&#x4F20;&#x5E76;&#x4E0B;&#x8F7D;&#x955C;&#x50CF;&#x6587;&#x4EF6;" class="headerlink" title="&#x4E0A;&#x4F20;&#x5E76;&#x4E0B;&#x8F7D;&#x955C;&#x50CF;&#x6587;&#x4EF6;"></a>&#x4E0A;&#x4F20;&#x5E76;&#x4E0B;&#x8F7D;&#x955C;&#x50CF;&#x6587;&#x4EF6;</h2><p>&#x7B2C;&#x4E00;&#x6B65;&#x3001;&#x5148;&#x767B;&#x5F55;&#x8FD9;&#x4E2A;&#x79C1;&#x6709;&#x4ED3;&#x5E93;&#xFF0C;&#x5E76;&#x89E3;&#x51B3;https&#x7684;&#x95EE;&#x9898;&#xFF1B;</p>
<p>&#x95EE;&#x9898;&#x663E;&#x793A;&#x5982;&#x4E0B;&#xFF1A;</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">root@ubuntu20:~# docker login harbor.test.com</span><br><span class="line">Username: admin</span><br><span class="line">Password:</span><br><span class="line">Error response from daemon: Get https://harbor.test.com/v2/: dial tcp 192.168.169.20:443: connect: connection refused</span><br><span class="line"><span class="meta">#</span><span class="bash"> &#x62A5;&#x9519;&#xFF1A;&#x8FD9;&#x91CC;&#x8868;&#x793A;&#x9700;&#x8981;&#x901A;&#x8FC7;https&#x6765;&#x8FDB;&#x884C;&#x94FE;&#x63A5;</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> &#x89E3;&#x51B3; &#x6DFB;&#x52A0;&#x4E00;&#x4E2A;&#x914D;&#x7F6E;&#x6587;&#x4EF6;</span></span><br><span class="line">dockerd --help | grep ins</span><br><span class="line">--insecure-registry list     enable insecure registry communication</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> &#x6211;&#x4EEC;&#x6DFB;&#x52A0;&#x5230;service&#x6587;&#x4EF6;&#x4E2D;&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x6DFB;&#x52A0;&#x5230;daemon.json&#x6587;&#x4EF6; &#x4E2D;</span></span><br><span class="line">cd /usr/lib/systemd/system</span><br><span class="line">vim docker.service</span><br><span class="line">ExecStart=/usr/bin/dockerd -H fd:// --containerd=/run/containerd/containerd.sock --insecure-registry harbor.test.com  # &#x8FD9;&#x91CC;&#x52A0;&#x7684;&#x662F;&#x672C;&#x5730;&#x4ED3;&#x5E93;&#x7684;&#x5185;&#x5BB9;</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> &#x91CD;&#x542F;docker</span></span><br><span class="line">systemctl deamon-reload</span><br><span class="line">systemctl restart docker</span><br></pre></td></tr></table></figure>

<p>&#x7B2C;&#x4E8C;&#x6B65;&#x3001;&#x4FEE;&#x6539;&#x955C;&#x50CF;&#x7684;&#x4ED3;&#x5E93;&#x540D;&#x79F0;</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> &#x67E5;&#x770B;&#x4EE5;&#x4E0B;&#x672C;&#x5730;&#x955C;&#x50CF;</span></span><br><span class="line">docker images</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> &#x4FEE;&#x6539;docker&#x955C;&#x50CF;&#x7684;&#x955C;&#x50CF;&#x540D;&#x4E0E;&#x6807;&#x7B7E;&#x540D;</span></span><br><span class="line">docker tag nginx:alpine harbor.test.com/myblog/nginx:v1</span><br></pre></td></tr></table></figure>

<p>&#x8FD9;&#x91CC;&#x9700;&#x8981;&#x6CE8;&#x610F;&#x7684;&#x662F;&#xFF0C;harbor.test.com&#x662F;&#x6211;&#x81EA;&#x5DF1;&#x7684;harbor&#x4ED3;&#x5E93;&#x5730;&#x5740;&#xFF0C;myblog&#x662F;&#x6211;&#x9879;&#x76EE;&#x540D;&#x79F0;&#xFF0C;&#x800C;nginx&#x4E3A;&#x955C;&#x50CF;&#x540D;&#xFF0C;v1&#x4E3A;&#x6807;&#x7B7E;&#x540D;&#xFF1B;</p>
<p>&#x7B2C;&#x4E09;&#x6B65;&#x3001;&#x4E0A;&#x4F20;&#x955C;&#x50CF;</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker push harbor.test.com/myblog/nginx # &#x8FD9;&#x6837;&#x5C31;&#x53EF;&#x4EE5;&#x4E0A;&#x4F20;&#x955C;&#x50CF;&#x4E86;&#xFF1B;</span><br></pre></td></tr></table></figure>

<p><img src="/%E4%BA%91%E5%8E%9F%E7%94%9F/04_harbor%E7%9A%84%E5%8D%95%E6%9C%BA%E9%83%A8%E7%BD%B2/image-20211231132549913.png" alt="image-20211231132549913"></p>
<p>&#x6B64;&#x65F6;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x5728;&#x81EA;&#x5DF1;harbor.test.com&#x7684;&#x79C1;&#x6709;&#x4ED3;&#x5E93;&#x4E0A;&#x9762;&#x770B;&#x5230;&#x6211;&#x4EEC;&#x4E0A;&#x4F20;&#x7684;&#x955C;&#x50CF;&#x6587;&#x4EF6;&#x4E86;&#xFF0C;&#x5982;&#x4E0B;&#x56FE;&#x6240;&#x793A;&#xFF1A;</p>
<p><img src="/%E4%BA%91%E5%8E%9F%E7%94%9F/04_harbor%E7%9A%84%E5%8D%95%E6%9C%BA%E9%83%A8%E7%BD%B2/image-20211231132610520.png" alt="image-20211231132610520"></p>
<p>&#x7B2C;&#x56DB;&#x6B65;&#x3001;&#x4E0B;&#x8F7D;&#x955C;&#x50CF;</p>
<p>&#x6CE8;&#x610F;&#x4E0B;&#x8F7D;&#x955C;&#x50CF;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x4E0B;&#x8F7D;&#x7684;&#x673A;&#x5668;&#x5FC5;&#x987B;&#x4E5F;&#x662F;&#x6307;&#x5B9A;&#x4E86;&#x9ED8;&#x8BA4;&#x7684;http&#x670D;&#x52A1;&#xFF0C;&#x4E5F;&#x662F;&#x5FFD;&#x7565;&#x4E86;https&#x7684;&#x670D;&#x52A1;&#x7684;&#xFF1B;</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">vim docker.service</span><br><span class="line">ExecStart=/usr/bin/dockerd -H fd:// --containerd=/run/containerd/containerd.sock --insecure-registry 192.168.169.20xxxxxxxxxx&#xA0;vim docker.serviceExecStart=/usr/bin/dockerd -H fd:// --containerd=/run/containerd/containerd.sock --insecure-registry 192.168.169.20docker </span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> &#x91CD;&#x65B0;&#x52A0;&#x8F7D;docker&#x5BB9;&#x5668;</span></span><br><span class="line">docker deamon-reload</span><br><span class="line">systemctl restart docker</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> &#x767B;&#x5F55;</span></span><br><span class="line">docker login harbor.test.com</span><br></pre></td></tr></table></figure>

<p>&#x5176;&#x5B9E;&#xFF0C;&#x6211;&#x4EEC;&#x4E0B;&#x8F7D;&#x955C;&#x50CF;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x5728;&#x4ED3;&#x5E93;&#x4E2D;&#x5C31;&#x6709;&#x63D0;&#x793A;&#x4E86;&#xFF0C;&#x5982;&#x4E0B;&#x56FE;&#x6240;&#x793A;&#xFF1A;</p>
<p><img src="/%E4%BA%91%E5%8E%9F%E7%94%9F/04_harbor%E7%9A%84%E5%8D%95%E6%9C%BA%E9%83%A8%E7%BD%B2/image-20211231132705613.png" alt="image-20211231132705613"></p>
<p>&#x4E0B;&#x8F7D;&#x955C;&#x50CF;&#x547D;&#x4EE4;&#x5982;&#x4E0B;&#xFF1A;</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> &#x4E0B;&#x8F7D;&#x955C;&#x50CF;</span></span><br><span class="line">docker pull harbor.test.com/myblog/nginx@sha256:544ba2bfe312bf2b13278495347bb9381ec342e630bcc8929af124f1291784bb</span><br></pre></td></tr></table></figure>

<h2 id="&#x914D;&#x7F6E;&#x955C;&#x50CF;&#x626B;&#x63CF;&#x529F;&#x80FD;"><a href="#&#x914D;&#x7F6E;&#x955C;&#x50CF;&#x626B;&#x63CF;&#x529F;&#x80FD;" class="headerlink" title="&#x914D;&#x7F6E;&#x955C;&#x50CF;&#x626B;&#x63CF;&#x529F;&#x80FD;"></a>&#x914D;&#x7F6E;&#x955C;&#x50CF;&#x626B;&#x63CF;&#x529F;&#x80FD;</h2><p>&#x5F53;&#x524D;&#x4E92;&#x8054;&#x7F51;&#x73AF;&#x5883;&#x4E0B;&#xFF0C;&#x6211;&#x4EEC;&#x5BF9;&#x4E8E;&#x955C;&#x50CF;&#x90FD;&#x662F;&#x6709;&#x5B89;&#x5168;&#x8981;&#x6C42;&#x7684;&#xFF0C;&#x6211;&#x4EEC;&#x9700;&#x8981;&#x53EF;&#x4EE5;&#x5BF9;&#x955C;&#x50CF;&#x8FDB;&#x884C;&#x626B;&#x63CF;&#x5904;&#x7406;&#xFF1B;&#x5BF9;&#x4E8E;&#xFF0C;&#x4E0D;&#x7B26;&#x5408;&#x5B89;&#x5168;&#x9700;&#x6C42;&#x7684;&#x955C;&#x50CF;&#x8FDB;&#x884C;&#x76F8;&#x5E94;&#x5904;&#x7406;&#xFF1B;&#x9ED8;&#x8BA4;&#x60C5;&#x51B5;&#x4E0B;&#x626B;&#x63CF;&#x529F;&#x80FD;&#x662F;&#x6CA1;&#x6709;&#x5F00;&#x542F;&#x7684;&#xFF0C;&#x5982;&#x4E0B;&#x6240;&#x793A;&#xFF1A;</p>
<p>&#x7CFB;&#x7EDF;&#x7BA1;&#x7406;-&gt;&#x5BA1;&#x67E5;&#x670D;&#x52A1;-&gt;&#x626B;&#x63CF;&#x5668;</p>
<p><img src="/%E4%BA%91%E5%8E%9F%E7%94%9F/04_harbor%E7%9A%84%E5%8D%95%E6%9C%BA%E9%83%A8%E7%BD%B2/image-20211231133351525.png" alt="image-20211231133351525"></p>
<p>&#x56E0;&#x6B64;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x5728;&#x7CFB;&#x7EDF;&#x5F00;&#x542F;&#x7684;&#x65F6;&#x5019;&#x6DFB;&#x52A0;&#x9ED8;&#x8BA4;&#x626B;&#x63CF;&#x5668;&#xFF0C;&#x5B89;&#x88C5;&#x5982;&#x4E0B;&#xFF1A;</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">./install.sh --help</span><br><span class="line">Please set --with-trivy if needs enable Trivy in Harbor  # &#x5F00;&#x542F;&#x626B;&#x63CF;&#x5668;&#xFF0C;&#x4E00;&#x822C;&#x4F1A;&#x6253;&#x5F00;</span><br><span class="line">Please set --with-chartmuseum if needs enable Chartmuseum in Harbor  # &#x5F00;&#x542F;&#x9ED8;&#x8BA4;&#x7684;&#x626B;&#x63CF;&#x5668;&#xFF0C;&#x4E00;&#x822C;&#x4E5F;&#x6253;&#x5F00;</span><br><span class="line"><span class="meta">#</span><span class="bash"> &#x6DFB;&#x52A0;&#x4E0A;&#x9762;&#x4E24;&#x4E2A;&#x53C2;&#x6570;&#x5373;&#x53EF;&#xFF1B;</span></span><br><span class="line"></span><br><span class="line">./install.sh --with-trivy --with-chartmuseum</span><br></pre></td></tr></table></figure>

<p>&#x518D;&#x53BB;&#x767B;&#x5F55;&#x81EA;&#x5DF1;&#x7684;harbor&#x4ED3;&#x5E93;&#x5730;&#x5740;&#xFF0C;&#x8FD9;&#x65F6;&#x5019;&#x5C31;&#x80FD;&#x770B;&#x5230;&#x9ED8;&#x8BA4;&#x626B;&#x63CF;&#x5668;&#x4E86;&#xFF0C;&#x5982;&#x4E0B;&#x56FE;&#x6240;&#x793A;&#xFF1A;</p>
<p><img src="/%E4%BA%91%E5%8E%9F%E7%94%9F/04_harbor%E7%9A%84%E5%8D%95%E6%9C%BA%E9%83%A8%E7%BD%B2/image-20211231133854904.png" alt="image-20211231133854904"></p>
<p>&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x8BE5;&#x626B;&#x63CF;&#x5668;&#xFF0C;&#x5BF9;docker&#x955C;&#x50CF;&#x8FDB;&#x884C;&#x7B80;&#x5355;&#x626B;&#x63CF;&#xFF1B;&#x9009;&#x4E2D;&#x955C;&#x50CF;&#x540E;&#xFF0C;&#x5BF9;&#x5176;&#x8FDB;&#x884C;&#x626B;&#x63CF;&#xFF0C;&#x5982;&#x4E0B;&#x56FE;&#x6240;&#x793A;&#xFF1A;</p>
<p><img src="/%E4%BA%91%E5%8E%9F%E7%94%9F/04_harbor%E7%9A%84%E5%8D%95%E6%9C%BA%E9%83%A8%E7%BD%B2/image-20211231134038625.png" alt="image-20211231134038625"></p>
<p>&#x7B49;&#x5F85;&#x626B;&#x63CF;&#x5B8C;&#x6210;&#x4EE5;&#x540E;&#xFF0C;&#x5C31;&#x53EF;&#x4EE5;&#x67E5;&#x770B;&#x76F8;&#x5E94;&#x7684;&#x65E5;&#x5FD7;&#x4FE1;&#x606F;&#x4E86;&#xFF1B;</p>
<blockquote>
<p>&#x8FD9;&#x91CC;&#x6211;&#x4EEC;&#x5982;&#x679C;&#x5DF2;&#x7ECF;&#x5B89;&#x88C5;&#x597D;&#x4E86;&#x626B;&#x63CF;&#x5668;&#x4E86;&#xFF0C;&#x6211;&#x4EEC;&#x5176;&#x5B9E;&#x8FD8;&#x6709;&#x53E6;&#x5916;&#x4E00;&#x79CD;&#x65B9;&#x5F0F;&#x5F00;&#x542F;&#x626B;&#x63CF;&#x5668;</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">./prepare --with-clair</span><br></pre></td></tr></table></figure>

<p>&#x8FD9;&#x6837;&#x53EF;&#x4EE5;&#x5E2E;&#x52A9;&#x6211;&#x4EEC;&#x5F00;&#x542F;&#x9ED8;&#x8BA4;&#x626B;&#x63CF;&#x5668;&#xFF1B;</p>
</blockquote>
<h2 id="&#x4E24;&#x53F0;harbor&#x7684;&#x955C;&#x50CF;&#x540C;&#x6B65;&#x529F;&#x80FD;&#x5B9E;&#x73B0;"><a href="#&#x4E24;&#x53F0;harbor&#x7684;&#x955C;&#x50CF;&#x540C;&#x6B65;&#x529F;&#x80FD;&#x5B9E;&#x73B0;" class="headerlink" title="&#x4E24;&#x53F0;harbor&#x7684;&#x955C;&#x50CF;&#x540C;&#x6B65;&#x529F;&#x80FD;&#x5B9E;&#x73B0;"></a>&#x4E24;&#x53F0;harbor&#x7684;&#x955C;&#x50CF;&#x540C;&#x6B65;&#x529F;&#x80FD;&#x5B9E;&#x73B0;</h2><h3 id="&#x51C6;&#x5907;&#x73AF;&#x5883;"><a href="#&#x51C6;&#x5907;&#x73AF;&#x5883;" class="headerlink" title="&#x51C6;&#x5907;&#x73AF;&#x5883;"></a>&#x51C6;&#x5907;&#x73AF;&#x5883;</h3><p>&#x9996;&#x5148;&#xFF0C;&#x6211;&#x4EEC;&#x9700;&#x8981;&#x518D;&#x51C6;&#x5907;&#x4E00;&#x53F0;harbor&#x7684;&#x670D;&#x52A1;&#x5668;&#xFF0C;&#x914D;&#x7F6E;&#x548C;&#x4E4B;&#x524D;&#x7684;&#x670D;&#x52A1;&#x5668;&#x914D;&#x7F6E;&#x76F8;&#x540C;&#xFF1B;</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> &#x4FEE;&#x6539;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#xFF0C;&#x6307;&#x5B9A;&#x4E3B;&#x673A;&#x540D;&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x590D;&#x5236;yml&#x7684;&#x914D;&#x7F6E;&#x6587;&#x4EF6;</span></span><br><span class="line">cp harbor.yml.tmpl harbor.yml</span><br><span class="line">vim harbor.yml</span><br><span class="line">hostname: harbor.test2.com</span><br><span class="line"><span class="meta">#</span><span class="bash"> &#x5176;&#x4ED6;&#x914D;&#x7F6E;&#x4FEE;&#x6539;&#x90FD;&#x76F8;&#x540C;</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> &#x540C;&#x65F6;&#xFF0C;&#x5C06;hosts&#x6587;&#x4EF6;&#x7684;&#x4E3B;&#x673A;&#x540D;&#x4E5F;&#x4FEE;&#x6539;&#x4EE5;&#x4E0B;</span></span><br><span class="line">192.168.169.20  harbor.test.com</span><br><span class="line">192.168.169.21  harbor.test.com</span><br><span class="line"><span class="meta">#</span><span class="bash"> &#x5728;&#x4E3B;&#x670D;&#x52A1;&#x5668;&#x4E5F;&#x8981;&#x6DFB;&#x52A0;&#x8FD9;&#x4E2A;&#x4E3B;&#x673A;&#x540D;&#x89E3;&#x6790;</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> &#x518D;&#x5728;windows&#x673A;&#x5668;&#x4E0A;&#x4E5F;&#x6DFB;&#x52A0;&#x4E3B;&#x673A;&#x540D;&#x89E3;&#x6790;</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> &#x5B89;&#x88C5;harbor&#x670D;&#x52A1;&#x5668;</span></span><br><span class="line"> ./install.sh --with-trivy --with-chartmuseum</span><br></pre></td></tr></table></figure>

<p>&#x8BBF;&#x95EE;&#x6D4B;&#x8BD5;&#x5982;&#x4E0B;&#xFF1A;</p>
<p><img src="/%E4%BA%91%E5%8E%9F%E7%94%9F/04_harbor%E7%9A%84%E5%8D%95%E6%9C%BA%E9%83%A8%E7%BD%B2/image-20211231222309239.png" alt="image-20211231222309239"></p>
<p>&#x7136;&#x540E;&#x914D;&#x7F6E;&#x672C;&#x5730;docker&#x767B;&#x5F55;&#x65F6;&#x5FFD;&#x7565;https&#x7684;&#x8BC1;&#x4E66;&#x8BBF;&#x95EE;&#x8BF7;&#x6C42;&#xFF0C;&#x9ED8;&#x8BA4;&#x6539;&#x4E3A;http&#x8BBF;&#x95EE;&#xFF1B;&#x4FEE;&#x6539;docker.service&#x6587;&#x4EF6;&#xFF0C;&#x914D;&#x7F6E;&#x5982;&#x4E0B;&#xFF1A;</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> &#x53C2;&#x6570;--insecure-registry&#x540E;&#x9762;&#x83B7;&#x53D6;&#x7684;&#x662F;&#x5217;&#x8868;&#x6587;&#x4EF6;&#xFF0C;&#x6240;&#x4EE5;&#x540E;&#x9762;&#x7684;&#x53C2;&#x6570;&#x4EE5;&#x5217;&#x8868;&#x5F62;&#x5F0F;&#x6765;&#x5199;&#x5165;&#x5373;&#x53EF;&#xFF1B;&#x4E3B;&#x673A;&#x5668;&#x4E0A;&#x4E5F;&#x9700;&#x8981;&#x914D;&#x7F6E;&#xFF1B;</span></span><br><span class="line">vim /usr/lib/systemd/system/docker.service</span><br><span class="line">ExecStart=/usr/bin/dockerd -H fd:// --containerd=/run/containerd/containerd.sock --insecure-registry [harbor.test.com,harbor.test2.com]</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> &#x91CD;&#x542F;&#x670D;&#x52A1;&#x5373;&#x53EF;</span></span><br><span class="line">systemctl deamon-reload</span><br><span class="line">systemctl restart docker.service</span><br></pre></td></tr></table></figure>

<p>&#x5230;&#x6B64;&#xFF0C;&#x6211;&#x4EEC;&#x5C31;&#x53EF;&#x4EE5;&#x5F97;&#x5230;&#x4E24;&#x4E2A;&#x72EC;&#x7ACB;&#x7684;harbor&#x672C;&#x5730;&#x4ED3;&#x5E93;&#x4E86;&#xFF1B;</p>
<h3 id="&#x955C;&#x50CF;&#x540C;&#x6B65;&#x914D;&#x7F6E;"><a href="#&#x955C;&#x50CF;&#x540C;&#x6B65;&#x914D;&#x7F6E;" class="headerlink" title="&#x955C;&#x50CF;&#x540C;&#x6B65;&#x914D;&#x7F6E;"></a>&#x955C;&#x50CF;&#x540C;&#x6B65;&#x914D;&#x7F6E;</h3><p>harbor.test.com&#x4F5C;&#x4E3A;&#x4E3B;&#x670D;&#x52A1;&#x5668;&#xFF0C;&#x65B0;&#x5EFA;&#x9879;&#x76EE;&#x5982;&#x4E0B;&#xFF1A;</p>
<p>&#x7CFB;&#x7EDF;&#x7BA1;&#x7406;-&gt;&#x4ED3;&#x5E93;&#x7BA1;&#x7406;-&gt;&#x65B0;&#x5EFA;&#x76EE;&#x6807;</p>
<p><img src="/%E4%BA%91%E5%8E%9F%E7%94%9F/04_harbor%E7%9A%84%E5%8D%95%E6%9C%BA%E9%83%A8%E7%BD%B2/image-20211231232125193.png" alt="image-20211231232125193"></p>
<p>&#x5BF9;&#x7AEF;&#x4E5F;&#x5982;&#x6B64;&#x65B0;&#x5EFA;&#x76EE;&#x6807;&#xFF0C;&#x6CE8;&#x610F;&#x8981;&#x76F8;&#x4E92;&#x6307;&#x5B9A;&#xFF1B;</p>
<p><img src="/%E4%BA%91%E5%8E%9F%E7%94%9F/04_harbor%E7%9A%84%E5%8D%95%E6%9C%BA%E9%83%A8%E7%BD%B2/image-20211231232233647.png" alt="image-20211231232233647"></p>
<p>&#x7136;&#x540E;&#x914D;&#x7F6E;&#x590D;&#x5236;&#x7BA1;&#x7406;&#x7B56;&#x7565;&#xFF1A;&#x7CFB;&#x7EDF; &#x7BA1;&#x7406;-&gt;&#x590D;&#x5236;&#x7BA1;&#x7406;-&gt;&#x65B0;&#x5EFA;&#x89C4;&#x5219;</p>
<p><img src="/%E4%BA%91%E5%8E%9F%E7%94%9F/04_harbor%E7%9A%84%E5%8D%95%E6%9C%BA%E9%83%A8%E7%BD%B2/image-20211231232442550.png" alt="image-20211231232442550"></p>
<p>&#x5BF9;&#x7AEF;&#x4E5F;&#x662F;&#x5982;&#x6B64;&#xFF0C;&#x8FD9;&#x91CC;&#x9700;&#x8981;&#x6CE8;&#x610F;&#x7684;&#x662F;&#xFF0C;&#x6211;&#x4EEC;&#x4F7F;&#x7528;push&#x7684;&#x65B9;&#x5F0F;&#x8FDB;&#x884C;&#x540C;&#x6B65;&#xFF0C;&#x56E0;&#x4E3A;&#x53EA;&#x6709;&#x672C;&#x5730;&#x955C;&#x50CF;&#x66F4;&#x65B0;&#x4E86;&#x5C31;&#x53EF;&#x4EE5;&#x5C06;&#x65B0;&#x7684;&#x955C;&#x50CF;push&#x5230;&#x5BF9;&#x7AEF;&#xFF1B;&#x7136;&#x540E;&#x9009;&#x62E9;&#x51FA;&#x53D1;&#x65B9;&#x5F0F;&#x7684;&#x65F6;&#x5019;&#x9700;&#x8981;&#x9009;&#x62E9;<strong>&#x201D;&#x4E8B;&#x4EF6;&#x9A71;&#x52A8;&#x201C;</strong>&#xFF0C;&#x56E0;&#x4E3A;&#x53EA;&#x8981;&#x6709;&#x66F4;&#x65B0;&#x5C31;&#x5E94;&#x8BE5;&#x8FDB;&#x884C;&#x955C;&#x50CF;&#x540C;&#x6B65;&#xFF0C;&#x8FD9;&#x6837;&#x624D;&#x7B26;&#x5408;&#x6211;&#x4EEC;&#x7684;&#x955C;&#x50CF;&#x540C;&#x6B65;&#x7684;&#x903B;&#x8F91;&#xFF1B;</p>
<h3 id="&#x6D4B;&#x8BD5;&#x540C;&#x6B65;&#x60C5;&#x51B5;"><a href="#&#x6D4B;&#x8BD5;&#x540C;&#x6B65;&#x60C5;&#x51B5;" class="headerlink" title="&#x6D4B;&#x8BD5;&#x540C;&#x6B65;&#x60C5;&#x51B5;"></a>&#x6D4B;&#x8BD5;&#x540C;&#x6B65;&#x60C5;&#x51B5;</h3><p>&#x540E;&#xFF0C;&#x6211;&#x4EEC;&#x4E0A;&#x4F20;&#x4EE5;&#x4E0B;&#x955C;&#x50CF;&#xFF0C;&#x8FD9;&#x65F6;&#x5019;&#x5C31;&#x80FD;&#x89E6;&#x53D1;&#x4EE5;&#x4E0B;&#x540C;&#x6B65;&#x673A;&#x5236;&#xFF1B;</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> &#x5148;&#x767B;&#x5F55;</span></span><br><span class="line">docker login harbor.test.com</span><br><span class="line"><span class="meta">#</span><span class="bash"> &#x518D;&#x4E0A;&#x4F20;&#x955C;&#x50CF;</span></span><br><span class="line">docker pull centos  # &#x8FD9;&#x65F6;&#x5019;&#x5C31;&#x4F1A;&#x89E6;&#x53D1;&#x540C;&#x6B65;</span><br></pre></td></tr></table></figure>

<p>&#x67E5;&#x770B;harbor.test2.com&#x7684;&#x540C;&#x6B65;&#x60C5;&#x51B5;&#xFF0C;&#x6B64;&#x65F6;&#x6536;&#x5230;&#x4E86;&#x955C;&#x50CF;&#x6587;&#x4EF6;&#xFF0C;&#x5219;&#x8868;&#x793A;&#x955C;&#x50CF;&#x540C;&#x6B65;&#x6210;&#x529F;&#xFF1B;</p>
]]></content>
      <categories>
        <category>云原生</category>
      </categories>
      <tags>
        <tag>容器</tag>
        <tag>docker</tag>
        <tag>harbor仓库</tag>
      </tags>
  </entry>
  <entry>
    <title>单链路网络架构实验</title>
    <url>/network/%E5%8D%95%E9%93%BE%E8%B7%AF%E7%BD%91%E7%BB%9C%E6%9E%B6%E6%9E%84%E5%AE%9E%E9%AA%8C/</url>
    <content><![CDATA[<h1 id="&#x9879;&#x76EE;&#x4E00;&#xFF1A;&#x5355;&#x94FE;&#x8DEF;&#x4F01;&#x4E1A;&#x7F51;&#x7EDC;&#x67B6;&#x6784;&#x5B9E;&#x73B0;"><a href="#&#x9879;&#x76EE;&#x4E00;&#xFF1A;&#x5355;&#x94FE;&#x8DEF;&#x4F01;&#x4E1A;&#x7F51;&#x7EDC;&#x67B6;&#x6784;&#x5B9E;&#x73B0;" class="headerlink" title="&#x9879;&#x76EE;&#x4E00;&#xFF1A;&#x5355;&#x94FE;&#x8DEF;&#x4F01;&#x4E1A;&#x7F51;&#x7EDC;&#x67B6;&#x6784;&#x5B9E;&#x73B0;"></a>&#x9879;&#x76EE;&#x4E00;&#xFF1A;&#x5355;&#x94FE;&#x8DEF;&#x4F01;&#x4E1A;&#x7F51;&#x7EDC;&#x67B6;&#x6784;&#x5B9E;&#x73B0;</h1><h2 id="1-1&#x3001;&#x9879;&#x76EE;&#x80CC;&#x666F;&#x63CF;&#x8FF0;"><a href="#1-1&#x3001;&#x9879;&#x76EE;&#x80CC;&#x666F;&#x63CF;&#x8FF0;" class="headerlink" title="1.1&#x3001;&#x9879;&#x76EE;&#x80CC;&#x666F;&#x63CF;&#x8FF0;"></a>1.1&#x3001;&#x9879;&#x76EE;&#x80CC;&#x666F;&#x63CF;&#x8FF0;</h2><p>&#x200B;    &#x7565;</p>
<span id="more"></span>

<h2 id="1-2&#x3001;&#x9879;&#x76EE;&#x62D3;&#x6251;&#x7ED3;&#x6784;"><a href="#1-2&#x3001;&#x9879;&#x76EE;&#x62D3;&#x6251;&#x7ED3;&#x6784;" class="headerlink" title="1.2&#x3001;&#x9879;&#x76EE;&#x62D3;&#x6251;&#x7ED3;&#x6784;"></a>1.2&#x3001;&#x9879;&#x76EE;&#x62D3;&#x6251;&#x7ED3;&#x6784;</h2><p><img src="/network/%E5%8D%95%E9%93%BE%E8%B7%AF%E7%BD%91%E7%BB%9C%E6%9E%B6%E6%9E%84%E5%AE%9E%E9%AA%8C/%E6%8B%93%E6%89%91%E7%BB%93%E6%9E%84.PNG" alt="&#x62D3;&#x6251;&#x7ED3;&#x6784;"></p>
<h2 id="1-3&#x3001;&#x9879;&#x76EE;&#x9700;&#x6C42;&#x4ECB;&#x7ECD;"><a href="#1-3&#x3001;&#x9879;&#x76EE;&#x9700;&#x6C42;&#x4ECB;&#x7ECD;" class="headerlink" title="1.3&#x3001;&#x9879;&#x76EE;&#x9700;&#x6C42;&#x4ECB;&#x7ECD;"></a>1.3&#x3001;&#x9879;&#x76EE;&#x9700;&#x6C42;&#x4ECB;&#x7ECD;</h2><p>&#x200B;    &#x6700;&#x603B;&#x76EE;&#x7684;&#xFF1A;PC&#x4E0E;&#x5916;&#x7F51;&#x4E92;&#x901A;&#xFF08;1.1.1.1 &#x6A21;&#x62DF;&#x5916;&#x7F51;&#xFF09;</p>
<p>1&#x3001;&#x4EA4;&#x6362;&#x7F51;&#x7EDC;&#x9700;&#x6C42;</p>
<p>&#x200B;     A &#x8BBE;&#x8BA1;vlan10&#x4F5C;&#x4E3A;&#x4E00;&#x4E2A;&#x4E1A;&#x52A1;vlan&#xFF0C;PC&#x5C5E;&#x4E8E;&#x8BE5;vlan</p>
<p>&#x200B;     B &#x4EA4;&#x6362;&#x673A;&#x4E0E;&#x4EA4;&#x6362;&#x673A;&#x4E4B;&#x95F4;&#xFF0C;&#x9700;&#x8981;&#x914D;&#x7F6E;trunk&#x578B;&#x94FE;&#x8DEF;</p>
<p>2&#x3001;&#x8DEF;&#x7531;&#x7F51;&#x7EDC;&#x9700;&#x6C42;</p>
<p>&#x200B;     A &#x4E3A;PC&#x5728;&#x6838;&#x5FC3;&#x4EA4;&#x6362;&#x673A;&#x4E0A;&#x914D;&#x7F6E;&#x7F51;&#x5173;&#x5730;&#x5740;&#xFF08;vlan 10 &#x7684;&#x865A;&#x62DF;&#x5730;&#x5740;&#xFF09;</p>
<p>&#x200B;     B &#x914D;&#x7F6E;&#x76F4;&#x8FDE;&#x5730;&#x5740;&#xFF0C;&#x80FD;&#x591F;&#x8BA9;&#x6838;&#x5FC3;&#x4EA4;&#x6362;&#x673A;&#x4E0E;&#x5916;&#x7F51;&#x4EA4;&#x6362;&#x673A;&#x4E92;&#x901A;</p>
<p>&#x200B;     C &#x914D;&#x7F6E;&#x9759;&#x6001;&#x8DEF;&#x7531;&#xFF0C;&#x80FD;&#x591F;&#x8BA9;&#x6838;&#x5FC3;&#x4EA4;&#x6362;&#x673A;&#x5B66;&#x4E60;&#x5230;1.1.1.1&#x7684;&#x8DEF;&#x7531;&#x6761;&#x76EE;&#xFF0C;&#x4E14;&#x540C;&#x65F6;&#xFF0C;&#x80FD;&#x8BA9;&#x5916;&#x90E8;&#x8DEF;&#x7531;&#x5668;&#x901A;&#x8FC7;&#x9759;&#x6001;&#x8DEF;&#x7531;&#x7684;&#x65B9;&#x5F0F;&#xFF0C;&#x5B66;&#x4E60;192.168.10.0/24&#x7F51;&#x6BB5;&#x7684;&#x8DEF;&#x7531;&#x4FE1;&#x606F;&#xFF1B;</p>
<h2 id="1-4&#x3001;&#x9879;&#x76EE;&#x914D;&#x7F6E;&#x5B9E;&#x73B0;"><a href="#1-4&#x3001;&#x9879;&#x76EE;&#x914D;&#x7F6E;&#x5B9E;&#x73B0;" class="headerlink" title="1.4&#x3001;&#x9879;&#x76EE;&#x914D;&#x7F6E;&#x5B9E;&#x73B0;"></a>1.4&#x3001;&#x9879;&#x76EE;&#x914D;&#x7F6E;&#x5B9E;&#x73B0;</h2><p>PC&#x914D;&#x7F6E;&#x5982;&#x4E0B;&#xFF1A;</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">no ip routing</span><br><span class="line"></span><br><span class="line">interface FastEthernet0/0</span><br><span class="line"> ip address 192.168.10.1 255.255.255.0</span><br><span class="line"> </span><br><span class="line">ip default-gateway 192.168.10.254</span><br></pre></td></tr></table></figure>

<p>access-SW&#x914D;&#x7F6E;&#x5982;&#x4E0B;&#xFF1A;</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">vlan database</span><br><span class="line"> vlan 10</span><br><span class="line"> exit </span><br><span class="line"> </span><br><span class="line">interface FastEthernet1/0</span><br><span class="line"> switchport access vlan 10</span><br><span class="line"> no ip address</span><br><span class="line"> </span><br><span class="line">interface FastEthernet1/1</span><br><span class="line"> switchport mode trunk</span><br><span class="line"> switchport trunk allow vlan all</span><br></pre></td></tr></table></figure>

<p>core-SW&#x914D;&#x7F6E;&#x5982;&#x4E0B;&#xFF1A;</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">interface FastEthernet1/0</span><br><span class="line"> switchport mode trunk</span><br><span class="line"> switchport trunk allow vlan all</span><br><span class="line"> </span><br><span class="line">vlan database</span><br><span class="line"> vlan 10</span><br><span class="line"> exit </span><br><span class="line"></span><br><span class="line">interface vlan 10</span><br><span class="line"> ip address 192.168.10.254 255.255.255.0</span><br><span class="line"></span><br><span class="line">interface FastEthernet0/0</span><br><span class="line"> ip address 12.1.1.1 255.255.255.0</span><br><span class="line"></span><br><span class="line">ip route 1.1.1.0 255.255.255.0 12.1.1.2</span><br></pre></td></tr></table></figure>

<p>to_out_router&#x8DEF;&#x7531;&#x5668;&#x914D;&#x7F6E;&#x5982;&#x4E0B;&#xFF1A;</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">interface Loopback1</span><br><span class="line"> ip address 1.1.1.1 255.255.255.0</span><br><span class="line"></span><br><span class="line">interface FastEthernet0/0</span><br><span class="line"> ip address 12.1.1.2 255.255.255.0</span><br><span class="line"> </span><br><span class="line">ip route 192.168.10.0 255.255.255.0 12.1.1.1</span><br></pre></td></tr></table></figure>

<h2 id="1-5&#x3001;&#x9879;&#x76EE;&#x603B;&#x7ED3;"><a href="#1-5&#x3001;&#x9879;&#x76EE;&#x603B;&#x7ED3;" class="headerlink" title="1.5&#x3001;&#x9879;&#x76EE;&#x603B;&#x7ED3;"></a>1.5&#x3001;&#x9879;&#x76EE;&#x603B;&#x7ED3;</h2><p>&#x200B;    &#x7565;</p>
]]></content>
      <categories>
        <category>network</category>
      </categories>
      <tags>
        <tag>vlan trunk</tag>
        <tag>静态路由</tag>
      </tags>
  </entry>
  <entry>
    <title>双链路网络架构实验</title>
    <url>/network/%E5%8F%8C%E9%93%BE%E8%B7%AF%E7%BD%91%E7%BB%9C%E6%9E%B6%E6%9E%84%E5%AE%9E%E9%AA%8C/</url>
    <content><![CDATA[<h1 id="&#x9879;&#x76EE;&#x4E8C;&#xFF1A;&#x53CC;&#x94FE;&#x8DEF;&#x4F01;&#x4E1A;&#x7F51;&#x7EDC;&#x67B6;&#x6784;&#x5B9E;&#x73B0;"><a href="#&#x9879;&#x76EE;&#x4E8C;&#xFF1A;&#x53CC;&#x94FE;&#x8DEF;&#x4F01;&#x4E1A;&#x7F51;&#x7EDC;&#x67B6;&#x6784;&#x5B9E;&#x73B0;" class="headerlink" title="&#x9879;&#x76EE;&#x4E8C;&#xFF1A;&#x53CC;&#x94FE;&#x8DEF;&#x4F01;&#x4E1A;&#x7F51;&#x7EDC;&#x67B6;&#x6784;&#x5B9E;&#x73B0;"></a>&#x9879;&#x76EE;&#x4E8C;&#xFF1A;&#x53CC;&#x94FE;&#x8DEF;&#x4F01;&#x4E1A;&#x7F51;&#x7EDC;&#x67B6;&#x6784;&#x5B9E;&#x73B0;</h1><h2 id="1-1&#x3001;&#x9879;&#x76EE;&#x80CC;&#x666F;&#x63CF;&#x8FF0;"><a href="#1-1&#x3001;&#x9879;&#x76EE;&#x80CC;&#x666F;&#x63CF;&#x8FF0;" class="headerlink" title="1.1&#x3001;&#x9879;&#x76EE;&#x80CC;&#x666F;&#x63CF;&#x8FF0;"></a>1.1&#x3001;&#x9879;&#x76EE;&#x80CC;&#x666F;&#x63CF;&#x8FF0;</h2><p>&#x200B;    &#x7565;</p>
<span id="more"></span>

<h2 id="1-2&#x3001;&#x9879;&#x76EE;&#x62D3;&#x6251;&#x7ED3;&#x6784;"><a href="#1-2&#x3001;&#x9879;&#x76EE;&#x62D3;&#x6251;&#x7ED3;&#x6784;" class="headerlink" title="1.2&#x3001;&#x9879;&#x76EE;&#x62D3;&#x6251;&#x7ED3;&#x6784;"></a>1.2&#x3001;&#x9879;&#x76EE;&#x62D3;&#x6251;&#x7ED3;&#x6784;</h2><p><img src="/network/%E5%8F%8C%E9%93%BE%E8%B7%AF%E7%BD%91%E7%BB%9C%E6%9E%B6%E6%9E%84%E5%AE%9E%E9%AA%8C/%E6%8B%93%E6%89%91%E7%BB%93%E6%9E%84.png" alt="&#x62D3;&#x6251;&#x7ED3;&#x6784;"></p>
<h2 id="1-3&#x3001;&#x9879;&#x76EE;&#x9700;&#x6C42;&#x4ECB;&#x7ECD;"><a href="#1-3&#x3001;&#x9879;&#x76EE;&#x9700;&#x6C42;&#x4ECB;&#x7ECD;" class="headerlink" title="1.3&#x3001;&#x9879;&#x76EE;&#x9700;&#x6C42;&#x4ECB;&#x7ECD;"></a>1.3&#x3001;&#x9879;&#x76EE;&#x9700;&#x6C42;&#x4ECB;&#x7ECD;</h2><p>&#x6700;&#x540E;&#x7684;&#x76EE;&#x7684;:PC1&#x548C;PC2&#x90FD;&#x80FD;&#x591F;&#x4E0E;&#x5916;&#x7F51;&#x4E92;&#x901A;&#xFF08;1.1.1.1 &#x6A21;&#x62DF;&#x5916;&#x7F51;&#xFF09;&#xFF0C;&#x540C;&#x65F6;&#xFF0C;&#x5728;&#x6838;&#x5FC3;&#x4EA4;&#x6362;&#x673A;down&#x673A;&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;PC1&#x548C;PC2&#x90FD;&#x80FD;&#x591F;&#x901A;&#x8FC7;&#x5907;&#x4EFD;&#x94FE;&#x8DEF;&#x6765;&#x4E0E;&#x5916;&#x7F51;&#x4E92;&#x901A;&#xFF1B;</p>
<p>1&#x3001;&#x4EA4;&#x6362;&#x7F51;&#x7EDC;&#x9700;&#x6C42;&#xFF1A;</p>
<p>&#x200B;    A&#x3001;&#x4EA4;&#x6362;&#x7F51;&#x7EDC;&#x4E2D;&#x9700;&#x8981;&#x914D;&#x7F6E;&#x5BF9;&#x5E94;&#x7684;&#x4E1A;&#x52A1;vlan&#xFF0C;&#x6709;vlan10&#x548C;vlan20&#xFF0C;&#x5176;&#x4E2D;PC1&#x5C5E;&#x4E8E;vlan10&#xFF0C;PC2&#x5C31;&#x5C5E;&#x4E8E;VLAN20&#xFF1B;</p>
<p>&#x200B;    B&#x3001;&#x4EA4;&#x6362;&#x673A;&#x4E0E;&#x4EA4;&#x6362;&#x673A;&#x4E4B;&#x95F4;&#x9700;&#x8981;&#x901A;&#x8FC7;trunk&#x4E92;&#x8054;&#xFF1B;</p>
<p>&#x200B;    C&#x3001;&#x624B;&#x52A8;&#x6307;&#x5B9A;core-sw1&#x4F5C;&#x4E3A;vlan10&#x7F51;&#x7EDC;&#x4E2D;&#x7684;root&#x7ED3;&#x70B9;&#xFF0C;&#x800C;core-sw2&#x4F5C;&#x4E3A;vlan10&#x7F51;&#x7EDC;&#x4E2D;&#x5907;&#x4EFD;root&#x7ED3;&#x70B9;&#xFF1B;&#x624B;&#x52A8;&#x6307;&#x5B9A;core-sw2&#x4F5C;&#x4E3A;vlan20&#x7F51;&#x7EDC;&#x4E2D;&#x7684;root&#x8282;&#x70B9;&#xFF0C;&#x800C;core-sw1&#x4F5C;&#x4E3A;vlan20&#x4E2D;&#x7684;&#x5907;&#x4EFD;root&#x8282;&#x70B9;&#xFF1B;</p>
<p>2&#x3001;&#x8DEF;&#x7531;&#x7F51;&#x7EDC;&#x9700;&#x6C42;&#xFF1A;</p>
<p>&#x200B;    A&#x3001;&#x914D;&#x7F6E;HSRP&#xFF08;&#x70ED;&#x5907;&#x4EFD;&#x5197;&#x4F59;&#x534F;&#x8BAE;&#xFF09;&#xFF0C;&#x8BA9;PC&#x80FD;&#x591F;&#x81EA;&#x52A8;&#x5207;&#x6362;&#x7F51;&#x5173;&#x8DEF;&#x7531;&#x5668;&#xFF1B;</p>
<p>&#x200B;    B&#x3001;&#x4ECE;&#x7F51;&#x5173;&#x5230;1.1.1.1&#x7684;&#x5916;&#x90E8;&#x8DEF;&#x7531;&#xFF0C;&#x6211;&#x4EEC;&#x914D;&#x7F6E;&#x52A8;&#x6001;&#x8DEF;&#x7531;&#x534F;&#x8BAE;&#xFF08;RIP&#xFF09;&#x5B9E;&#x73B0;&#x7F51;&#x7EDC;&#x4E92;&#x901A;&#xFF1B;</p>
<h2 id="1-4&#x3001;&#x9879;&#x76EE;&#x914D;&#x7F6E;&#x5B9E;&#x73B0;"><a href="#1-4&#x3001;&#x9879;&#x76EE;&#x914D;&#x7F6E;&#x5B9E;&#x73B0;" class="headerlink" title="1.4&#x3001;&#x9879;&#x76EE;&#x914D;&#x7F6E;&#x5B9E;&#x73B0;"></a>1.4&#x3001;&#x9879;&#x76EE;&#x914D;&#x7F6E;&#x5B9E;&#x73B0;</h2><p>PC1&#x548C;PC2&#x7684;&#x914D;&#x7F6E;&#x5982;&#x4E0B;&#xFF1A;</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># PC1&#x7684;&#x914D;&#x7F6E;&#x5982;&#x4E0B;</span><br><span class="line">no ip routing</span><br><span class="line"></span><br><span class="line">interface FastEthernet0/0</span><br><span class="line"> ip address 192.168.10.1 255.255.255.0</span><br><span class="line"> </span><br><span class="line">ip default-gateway 192.168.10.252</span><br><span class="line"></span><br><span class="line"># PC2&#x7684;&#x914D;&#x7F6E;&#x5982;&#x4E0B;</span><br><span class="line">no ip routing</span><br><span class="line"></span><br><span class="line">interface FastEthernet0/0</span><br><span class="line"> ip address 192.168.20.1 255.255.255.0</span><br><span class="line"></span><br><span class="line">ip default-gateway 192.168.20.252</span><br></pre></td></tr></table></figure>

<p>access-SW1&#x548C;access-SW2&#x7684;&#x914D;&#x7F6E;&#x5982;&#x4E0B;&#xFF1A;</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># access-SW1&#x914D;&#x7F6E;&#x5982;&#x4E0B;</span><br><span class="line">vlan database</span><br><span class="line"> vlan 10</span><br><span class="line"> vlan 20</span><br><span class="line"> exit </span><br><span class="line"> </span><br><span class="line">interface FastEthernet1/0</span><br><span class="line"> switchport access vlan 10</span><br><span class="line"> </span><br><span class="line">interface range FastEthernet1/1 -2</span><br><span class="line"> switchport mode trunk</span><br><span class="line"> switchport trunk allow vlan all</span><br><span class="line"> </span><br><span class="line"># access-SW2&#x7684;&#x914D;&#x7F6E;&#x5982;&#x4E0B;</span><br><span class="line">vlan database</span><br><span class="line"> vlan 10</span><br><span class="line"> vlan 20</span><br><span class="line"> exit </span><br><span class="line"> </span><br><span class="line">interface FastEthernet1/0</span><br><span class="line"> switchport access vlan 20</span><br><span class="line"> </span><br><span class="line">interface range FastEthernet1/1 -2</span><br><span class="line"> switchport mode trunk</span><br><span class="line"> switchport trunk allow vlan all</span><br></pre></td></tr></table></figure>

<p>core-SW1&#x548C;core-SW2&#x914D;&#x7F6E;&#x5982;&#x4E0B;&#xFF1A;</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># core-sw1&#x914D;&#x7F6E;&#x5982;&#x4E0B;</span><br><span class="line">vlan database</span><br><span class="line"> vlan 10</span><br><span class="line"> vlan 20</span><br><span class="line"> exit </span><br><span class="line"></span><br><span class="line">interface range FastEthernet1/0 -2</span><br><span class="line"> switchport mode trunk</span><br><span class="line"> switchport trunk allow vlan all</span><br><span class="line"></span><br><span class="line">spanning-tree vlan 10 priority 8192</span><br><span class="line">spanning-tree vlan 20 priority 16384</span><br><span class="line"></span><br><span class="line">interface vlan 10</span><br><span class="line"> ip address 192.168.10.254 255.255.255.0</span><br><span class="line"> standby 10 ip 192.168.10.252</span><br><span class="line"> standby 10 priority 110</span><br><span class="line"> </span><br><span class="line">interface vlan 20</span><br><span class="line"> ip address 192.168.20.254 255.255.255.0</span><br><span class="line"> standby 20 ip 192.168.20.252</span><br><span class="line"></span><br><span class="line">interface FastEthernet0/0</span><br><span class="line"> ip address 12.1.1.1 255.255.255.0</span><br><span class="line"></span><br><span class="line">router rip </span><br><span class="line"> no auto-summary</span><br><span class="line"> version 2</span><br><span class="line"> network 12.1.1.0</span><br><span class="line"> network 192.168.10.0</span><br><span class="line"> network 192.168.20.0</span><br><span class="line"></span><br><span class="line"># core-sw2&#x914D;&#x7F6E;&#x5982;&#x4E0B;</span><br><span class="line">vlan database</span><br><span class="line"> vlan 10</span><br><span class="line"> vlan 20</span><br><span class="line"> exit </span><br><span class="line"></span><br><span class="line">interface range FastEthernet1/0 -2</span><br><span class="line"> switchport mode trunk</span><br><span class="line"> switchport trunk allow vlan all</span><br><span class="line"></span><br><span class="line">spanning-tree vlan 10 priority 16384</span><br><span class="line">spanning-tree vlan 20 priority 8192</span><br><span class="line"></span><br><span class="line">interface vlan 10</span><br><span class="line"> ip address 192.168.10.253 255.255.255.0</span><br><span class="line"> standby 10 ip 192.168.10.252</span><br><span class="line"> </span><br><span class="line">interface vlan 20</span><br><span class="line"> ip address 192.168.20.253 255.255.255.0</span><br><span class="line"> standby 20 ip 192.168.20.252</span><br><span class="line"> standby 20 priority 110</span><br><span class="line"></span><br><span class="line">interface FastEthernet0/0</span><br><span class="line"> ip address 23.1.1.3 255.255.255.0</span><br><span class="line"> </span><br><span class="line">router rip </span><br><span class="line"> no auto-summary</span><br><span class="line"> version 2</span><br><span class="line"> network 23.1.1.0</span><br><span class="line"> network 192.168.10.0</span><br><span class="line"> network 192.168.20.0</span><br></pre></td></tr></table></figure>

<p>to_out_router&#x8DEF;&#x7531;&#x5668;&#x914D;&#x7F6E;&#x5982;&#x4E0B;&#xFF1A;</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">interface Loopback1</span><br><span class="line"> ip address 1.1.1.1 255.255.255.0</span><br><span class="line"></span><br><span class="line">interface FastEthernet0/0</span><br><span class="line"> ip address 12.1.1.2 255.255.255.0</span><br><span class="line"> </span><br><span class="line">interface FastEthernet0/1</span><br><span class="line"> ip address 23.1.1.2 255.255.255.0</span><br><span class="line"> </span><br><span class="line">router rip </span><br><span class="line"> no auto-summary</span><br><span class="line"> version 2</span><br><span class="line"> network 12.1.1.0</span><br><span class="line"> network 23.1.1.0</span><br><span class="line"> network 1.1.1.0</span><br></pre></td></tr></table></figure>

<p>&#x6D4B;&#x8BD5;&#x7ED3;&#x679C;&#x5982;&#x4E0B;&#x56FE;&#x6240;&#x793A;&#xFF1A;</p>
<p><img src="/network/%E5%8F%8C%E9%93%BE%E8%B7%AF%E7%BD%91%E7%BB%9C%E6%9E%B6%E6%9E%84%E5%AE%9E%E9%AA%8C/%E6%B5%8B%E8%AF%95%E7%BB%93%E6%9E%9C.png" alt="&#x6D4B;&#x8BD5;&#x7ED3;&#x679C;"></p>
<h2 id="1-5&#x3001;&#x9879;&#x76EE;&#x603B;&#x7ED3;"><a href="#1-5&#x3001;&#x9879;&#x76EE;&#x603B;&#x7ED3;" class="headerlink" title="1.5&#x3001;&#x9879;&#x76EE;&#x603B;&#x7ED3;"></a>1.5&#x3001;&#x9879;&#x76EE;&#x603B;&#x7ED3;</h2><p>&#x200B;    &#x7565;</p>
]]></content>
      <categories>
        <category>network</category>
      </categories>
      <tags>
        <tag>vlan trunk</tag>
        <tag>静态路由</tag>
        <tag>stp</tag>
        <tag>vrrp hsrp</tag>
      </tags>
  </entry>
  <entry>
    <title>园区网络架构实验</title>
    <url>/network/%E5%9B%AD%E5%8C%BA%E7%BD%91%E7%BB%9C%E6%9E%B6%E6%9E%84%E5%AE%9E%E9%AA%8C/</url>
    <content><![CDATA[<h1 id="&#x9879;&#x76EE;&#x4E09;&#xFF1A;&#x5927;&#x578B;&#x56ED;&#x533A;&#x7F51;&#x7EDC;&#x67B6;&#x6784;&#x5B9E;&#x73B0;"><a href="#&#x9879;&#x76EE;&#x4E09;&#xFF1A;&#x5927;&#x578B;&#x56ED;&#x533A;&#x7F51;&#x7EDC;&#x67B6;&#x6784;&#x5B9E;&#x73B0;" class="headerlink" title="&#x9879;&#x76EE;&#x4E09;&#xFF1A;&#x5927;&#x578B;&#x56ED;&#x533A;&#x7F51;&#x7EDC;&#x67B6;&#x6784;&#x5B9E;&#x73B0;"></a>&#x9879;&#x76EE;&#x4E09;&#xFF1A;&#x5927;&#x578B;&#x56ED;&#x533A;&#x7F51;&#x7EDC;&#x67B6;&#x6784;&#x5B9E;&#x73B0;</h1><h2 id="1-1&#x3001;&#x9879;&#x76EE;&#x80CC;&#x666F;&#x63CF;&#x8FF0;"><a href="#1-1&#x3001;&#x9879;&#x76EE;&#x80CC;&#x666F;&#x63CF;&#x8FF0;" class="headerlink" title="1.1&#x3001;&#x9879;&#x76EE;&#x80CC;&#x666F;&#x63CF;&#x8FF0;"></a>1.1&#x3001;&#x9879;&#x76EE;&#x80CC;&#x666F;&#x63CF;&#x8FF0;</h2><p>&#x200B;    &#x7565;</p>
<span id="more"></span>

<h2 id="1-2&#x3001;&#x9879;&#x76EE;&#x62D3;&#x6251;&#x7ED3;&#x6784;"><a href="#1-2&#x3001;&#x9879;&#x76EE;&#x62D3;&#x6251;&#x7ED3;&#x6784;" class="headerlink" title="1.2&#x3001;&#x9879;&#x76EE;&#x62D3;&#x6251;&#x7ED3;&#x6784;"></a>1.2&#x3001;&#x9879;&#x76EE;&#x62D3;&#x6251;&#x7ED3;&#x6784;</h2><p><img src="/network/%E5%9B%AD%E5%8C%BA%E7%BD%91%E7%BB%9C%E6%9E%B6%E6%9E%84%E5%AE%9E%E9%AA%8C/%E6%8B%93%E6%89%91%E7%BB%93%E6%9E%84.PNG" alt="&#x62D3;&#x6251;&#x7ED3;&#x6784;"></p>
<h2 id="1-3&#x3001;&#x9879;&#x76EE;&#x9700;&#x6C42;&#x4ECB;&#x7ECD;"><a href="#1-3&#x3001;&#x9879;&#x76EE;&#x9700;&#x6C42;&#x4ECB;&#x7ECD;" class="headerlink" title="1.3&#x3001;&#x9879;&#x76EE;&#x9700;&#x6C42;&#x4ECB;&#x7ECD;"></a>1.3&#x3001;&#x9879;&#x76EE;&#x9700;&#x6C42;&#x4ECB;&#x7ECD;</h2><p>&#x6700;&#x540E;&#x7684;&#x76EE;&#x7684;:PC&#x90FD;&#x80FD;&#x591F;&#x4E0E;&#x5916;&#x7F51;&#x4E92;&#x901A;&#xFF08;1.1.1.1 &#x6A21;&#x62DF;&#x5916;&#x7F51;&#xFF09;&#xFF0C;&#x540C;&#x65F6;&#xFF0C;&#x5728;&#x6838;&#x5FC3;&#x4EA4;&#x6362;&#x673A;down&#x673A;&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;PC&#x90FD;&#x80FD;&#x591F;&#x901A;&#x8FC7;&#x5907;&#x4EFD;&#x94FE;&#x8DEF;&#x6765;&#x4E0E;&#x5916;&#x7F51;&#x4E92;&#x901A;&#xFF1B;</p>
<p>1&#x3001; &#x4EA4;&#x6362;&#x7F51;&#x7EDC;&#x9700;&#x6C42;</p>
<p>&#x200B;    a)     PC&#x8981;&#x5C5E;&#x4E8E;&#x6307;&#x5B9A;vlan</p>
<p>&#x200B;    b)     &#x4EA4;&#x6362;&#x673A;&#x4E0E;&#x4EA4;&#x6362;&#x673A;&#x4E4B;&#x95F4;&#x9700;&#x8981;&#x914D;&#x7F6E;trunk&#x94FE;&#x8DEF;&#x4E92;&#x901A;&#xFF08;&#x54EA;&#x4E9B;&#x4E8B;&#x4EA4;&#x6362;&#x673A;&#x5462;&#xFF1F;&#xFF09;</p>
<p>&#x200B;    c)     &#x8BBE;&#x7F6E;stp&#x8BA9;&#x6C47;&#x805A;&#x5C42;&#x8BBE;&#x5907;&#x6210;&#x4E3A;root&#xFF0C;&#x4E14;&#x6C47;&#x805A;&#x5C42;&#x8BBE;&#x5907;&#x4E4B;&#x95F4;&#x76F8;&#x4E92;&#x4E3B;&#x5907;&#xFF1B;</p>
<p>&#x200B;    d)     &#x6C47;&#x805A;&#x4EA4;&#x6362;&#x673A;&#x4E4B;&#x95F4;&#x662F;&#x591A;&#x7EBF;&#x8DEF;&#x4E92;&#x8054;&#xFF0C;&#x6211;&#x4EEC;&#x9700;&#x8981;&#x914D;&#x7F6E;port-channel&#x5B9E;&#x73B0;&#x7AEF;&#x53E3;&#x7ED1;&#x5B9A;&#xFF1B;</p>
<p>2&#x3001; &#x8DEF;&#x7531;&#x7F51;&#x7EDC;&#x9700;&#x6C42;</p>
<p>&#x200B;    a)     &#x6C47;&#x805A;&#x5C42;&#x9700;&#x8981;&#x901A;&#x8FC7;vrrp&#x6216;&#x5219;hsrp&#x5B9E;&#x73B0;&#x7F51;&#x5173;&#x5197;&#x4F59;</p>
<p>&#x200B;    b)     &#x4E09;&#x5C42;&#x7F51;&#x7EDC;&#x4E2D;&#x914D;&#x7F6E;ospf&#x8DEF;&#x7531;&#x534F;&#x8BAE;&#xFF0C;&#x8BA9;&#x6838;&#x5FC3;&#x8DEF;&#x7531;&#x5668;&#x548C;&#x51FA;&#x53E3;&#x8DEF;&#x7531;&#x5668;&#x5904;&#x4E8E;&#x9AA8;&#x5E72;&#x533A;&#x57DF;&#xFF1B;&#x800C;&#x6C47;&#x805A;&#x4EA4;&#x6362;&#x673A;&#x5219;&#x5904;&#x4E8E;&#x975E;&#x9AA8;&#x5E72;&#x533A;&#x57DF;&#xFF1B;&#x8BA9;&#x4E0D;&#x540C;&#x5927;&#x697C;&#x4E4B;&#x95F4;&#x7684;PC&#x80FD;&#x591F;&#x4E92;&#x8BBF;&#xFF1B;</p>
<p>&#x200B;    c)     &#x914D;&#x7F6E;&#x9759;&#x6001;&#x8DEF;&#x7531;&#xFF0C;&#x4EE5;&#x53CA;nat&#x5B9E;&#x73B0;&#x5730;&#x5740;&#x8F6C;&#x6362;&#xFF0C;&#x8BA9;PC&#x80FD;&#x591F;&#x8BBF;&#x95EE;1.1.1.1</p>
<h2 id="1-4&#x3001;&#x9879;&#x76EE;&#x914D;&#x7F6E;&#x5B9E;&#x73B0;"><a href="#1-4&#x3001;&#x9879;&#x76EE;&#x914D;&#x7F6E;&#x5B9E;&#x73B0;" class="headerlink" title="1.4&#x3001;&#x9879;&#x76EE;&#x914D;&#x7F6E;&#x5B9E;&#x73B0;"></a>1.4&#x3001;&#x9879;&#x76EE;&#x914D;&#x7F6E;&#x5B9E;&#x73B0;</h2><p>PC1 &#x548C; PC2&#x7684;&#x914D;&#x7F6E;&#x5982;&#x4E0B;&#xFF1A;</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># PC1&#x7684;&#x914D;&#x7F6E;&#x5982;&#x4E0B;</span><br><span class="line">no ip routing</span><br><span class="line"></span><br><span class="line">interface FastEthernet0/0</span><br><span class="line"> ip address 192.168.10.1 255.255.255.0</span><br><span class="line"> </span><br><span class="line">ip default-gateway 192.168.10.252</span><br><span class="line"></span><br><span class="line"># PC2&#x7684;&#x914D;&#x7F6E;&#x5982;&#x4E0B;</span><br><span class="line">no ip routing</span><br><span class="line"></span><br><span class="line">interface FastEthernet0/0</span><br><span class="line"> ip address 192.168.100.1 255.255.255.0</span><br><span class="line"></span><br><span class="line">ip default-gateway 192.168.100.252</span><br></pre></td></tr></table></figure>

<p>&#x5927;&#x697C;1-access-SW1 &#x548C; &#x5927;&#x697C;1-access-SW2&#x7684;&#x914D;&#x7F6E;&#x5982;&#x4E0B;&#xFF1A;</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># &#x5927;&#x697C;1-access-SW1&#x914D;&#x7F6E;&#x5982;&#x4E0B;</span><br><span class="line">vlan database</span><br><span class="line"> vlan 10</span><br><span class="line"> exit </span><br><span class="line"> </span><br><span class="line">interface FastEthernet1/3</span><br><span class="line"> switchport access vlan 10</span><br><span class="line"> </span><br><span class="line">interface range FastEthernet1/1 -2</span><br><span class="line"> switchport mode trunk</span><br><span class="line"> switchport trunk allow vlan all</span><br><span class="line"> </span><br><span class="line"># &#x5927;&#x697C;1-access-SW2&#x7684;&#x914D;&#x7F6E;&#x5982;&#x4E0B;</span><br><span class="line">vlan database</span><br><span class="line"> vlan 10</span><br><span class="line"> exit </span><br><span class="line"> </span><br><span class="line">interface range FastEthernet1/1 -2</span><br><span class="line"> switchport mode trunk</span><br><span class="line"> switchport trunk allow vlan all</span><br></pre></td></tr></table></figure>

<p>&#x5927;&#x697C;2-access-SW1&#x7684;&#x914D;&#x7F6E;&#x5982;&#x4E0B;&#xFF1A;</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># &#x5927;&#x697C;2-access-SW1&#x914D;&#x7F6E;&#x5982;&#x4E0B;</span><br><span class="line">vlan database</span><br><span class="line"> vlan 100</span><br><span class="line"> exit </span><br><span class="line"> </span><br><span class="line">interface FastEthernet1/2</span><br><span class="line"> switchport access vlan 100</span><br><span class="line"> </span><br><span class="line">interface range FastEthernet1/0 -1</span><br><span class="line"> switchport mode trunk</span><br><span class="line"> switchport trunk allow vlan all</span><br></pre></td></tr></table></figure>

<p>&#x5927;&#x697C;1-converge-SW1 &#x548C; &#x5927;&#x697C;1-converge-SW2&#x914D;&#x7F6E;&#x5982;&#x4E0B;&#xFF1A;</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># &#x5927;&#x697C;1-converge-SW1&#x914D;&#x7F6E;&#x5982;&#x4E0B;</span><br><span class="line">vlan database</span><br><span class="line"> vlan 10</span><br><span class="line"> exit </span><br><span class="line"></span><br><span class="line">interface range FastEthernet1/0 -2</span><br><span class="line"> switchport mode trunk</span><br><span class="line"> switchport trunk allow vlan all</span><br><span class="line"></span><br><span class="line">spanning-tree vlan 10 priority 8192</span><br><span class="line"></span><br><span class="line">interface vlan 10</span><br><span class="line"> ip address 192.168.10.254 255.255.255.0</span><br><span class="line"> standby 10 ip 192.168.10.252</span><br><span class="line"> standby 10 priority 110</span><br><span class="line"></span><br><span class="line">interface FastEthernet0/0</span><br><span class="line"> ip address 46.1.1.6 255.255.255.0</span><br><span class="line"></span><br><span class="line">router ospf 10</span><br><span class="line"> network 192.168.10.0 0.0.0.255 a 1</span><br><span class="line"> network 46.1.1.0 0.0.0.255 a 1</span><br><span class="line"></span><br><span class="line"># &#x5927;&#x697C;1-converge-SW2&#x914D;&#x7F6E;&#x5982;&#x4E0B;</span><br><span class="line">vlan database</span><br><span class="line"> vlan 10</span><br><span class="line"> exit </span><br><span class="line"></span><br><span class="line">interface range FastEthernet1/0 -2</span><br><span class="line"> switchport mode trunk</span><br><span class="line"> switchport trunk allow vlan all</span><br><span class="line"></span><br><span class="line">spanning-tree vlan 10 priority 16384</span><br><span class="line"></span><br><span class="line">interface vlan 10</span><br><span class="line"> ip address 192.168.10.253 255.255.255.0</span><br><span class="line"> standby 10 ip 192.168.10.252</span><br><span class="line"></span><br><span class="line">interface FastEthernet0/0</span><br><span class="line"> ip address 57.1.1.7 255.255.255.0</span><br><span class="line"> </span><br><span class="line">router ospf 10</span><br><span class="line"> network 192.168.10.0 0.0.0.255 a 1</span><br><span class="line"> network 57.1.1.0 0.0.0.255 a 1</span><br></pre></td></tr></table></figure>

<p>&#x5927;&#x697C;2-converge-SW1 &#x548C; &#x5927;&#x697C;2-converge-SW2&#x914D;&#x7F6E;&#x5982;&#x4E0B;&#xFF1A;</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># &#x5927;&#x697C;&#xFF12;-converge-SW1&#x914D;&#x7F6E;&#x5982;&#x4E0B;</span><br><span class="line">vlan database</span><br><span class="line"> vlan 100</span><br><span class="line"> exit </span><br><span class="line"></span><br><span class="line">interface range FastEthernet1/0 -1</span><br><span class="line"> switchport mode trunk</span><br><span class="line"> switchport trunk allow vlan all</span><br><span class="line"></span><br><span class="line">spanning-tree vlan 100 priority 8192</span><br><span class="line"></span><br><span class="line">interface vlan 100</span><br><span class="line"> ip address 192.168.100.254 255.255.255.0</span><br><span class="line"> standby 10 ip 192.168.100.252</span><br><span class="line"> standby 10 priority 110</span><br><span class="line"></span><br><span class="line">interface FastEthernet0/0</span><br><span class="line"> ip address 48.1.1.8 255.255.255.0</span><br><span class="line"></span><br><span class="line">router ospf 10</span><br><span class="line"> network 192.168.100.0 0.0.0.255 a 2</span><br><span class="line"> network 48.1.1.0 0.0.0.255 a 2</span><br><span class="line"> </span><br><span class="line">ip route 0.0.0.0 0.0.0.0 46.1.1.4</span><br><span class="line"></span><br><span class="line"># &#x5927;&#x697C;2-converge-SW2&#x914D;&#x7F6E;&#x5982;&#x4E0B;</span><br><span class="line">vlan database</span><br><span class="line"> vlan 100</span><br><span class="line"> exit </span><br><span class="line"></span><br><span class="line">interface range FastEthernet1/0 -1</span><br><span class="line"> switchport mode trunk</span><br><span class="line"> switchport trunk allow vlan all</span><br><span class="line"></span><br><span class="line">spanning-tree vlan 100 priority 16384</span><br><span class="line"></span><br><span class="line">interface vlan 10</span><br><span class="line"> ip address 192.168.100.253 255.255.255.0</span><br><span class="line"> standby 10 ip 192.168.100.252</span><br><span class="line"></span><br><span class="line">interface FastEthernet0/0</span><br><span class="line"> ip address 59.1.1.9 255.255.255.0</span><br><span class="line"> </span><br><span class="line">router ospf 10</span><br><span class="line"> network 192.168.100.0 0.0.0.255 a 1</span><br><span class="line"> network 59.1.1.0 0.0.0.255 a 1</span><br><span class="line"> </span><br><span class="line">ip route 0.0.0.0 0.0.0.0 57.1.1.5 </span><br></pre></td></tr></table></figure>

<p>core-R1 &#x548C; core-R2&#x914D;&#x7F6E;&#x5982;&#x4E0B;&#xFF1A;</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># core-R1&#x914D;&#x7F6E;&#x5982;&#x4E0B;(&#x56FE;&#x4E2D;&#x7684;R4&#x8DEF;&#x7531;&#x5668;)</span><br><span class="line">interface Ethernet1/1</span><br><span class="line"> ip address 24.1.1.4 255.255.255.0</span><br><span class="line"> </span><br><span class="line">interface Ethernet1/0</span><br><span class="line"> ip address 45.1.1.4 255.255.255.0</span><br><span class="line"> </span><br><span class="line">interface Ethernet1/2</span><br><span class="line"> ip address 46.1.1.4 255.255.255.0</span><br><span class="line"> </span><br><span class="line">interface Ethernet1/3</span><br><span class="line"> ip address 48.1.1.4 255.255.255.0</span><br><span class="line"> </span><br><span class="line">router ospf 10</span><br><span class="line"> network 24.1.1.0 0.0.0.255 area 0</span><br><span class="line"> network 45.1.1.0 0.0.0.255 area 0</span><br><span class="line"> network 46.1.1.0 0.0.0.255 area 1</span><br><span class="line"> network 48.1.1.0 0.0.0.255 area 2</span><br><span class="line"> </span><br><span class="line">ip route 0.0.0.0 0.0.0.0 24.1.1.2</span><br><span class="line">ip route 0.0.0.0 0.0.0.0 45.1.1.5 50</span><br><span class="line"></span><br><span class="line"># core-R2&#x914D;&#x7F6E;&#x5982;&#x4E0B;(&#x56FE;&#x4E2D;&#x7684;R&#x8DEF;&#x7531;&#x5668;)</span><br><span class="line">interface Ethernet1/1</span><br><span class="line"> ip address 35.1.1.5 255.255.255.0</span><br><span class="line"> </span><br><span class="line">interface Ethernet1/0</span><br><span class="line"> ip address 45.1.1.5 255.255.255.0</span><br><span class="line"> </span><br><span class="line">interface Ethernet1/2</span><br><span class="line"> ip address 57.1.1.5 255.255.255.0</span><br><span class="line"> </span><br><span class="line">interface Ethernet1/3</span><br><span class="line"> ip address 59.1.1.5 255.255.255.0</span><br><span class="line"> </span><br><span class="line">router ospf 10</span><br><span class="line"> network 35.1.1.0 0.0.0.255 area 0</span><br><span class="line"> network 45.1.1.0 0.0.0.255 area 0</span><br><span class="line"> network 57.1.1.0 0.0.0.255 area 1</span><br><span class="line"> network 59.1.1.0 0.0.0.255 area 2</span><br><span class="line"> </span><br><span class="line">ip route 0.0.0.0 0.0.0.0 35.1.1.3</span><br><span class="line">ip route 0.0.0.0 0.0.0.0 45.1.1.4 50</span><br></pre></td></tr></table></figure>

<p>to-out-R1 &#x548C; to-out-R2&#x8DEF;&#x7531;&#x5668;&#x914D;&#x7F6E;&#x5982;&#x4E0B;&#xFF1A;</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># to-out-R1&#x7684;&#x914D;&#x7F6E;&#x5982;&#x4E0B;&#xFF1A;</span><br><span class="line">interface Ethernet1/0</span><br><span class="line"> ip address 12.1.1.2 255.255.255.0</span><br><span class="line"> ip nat outside</span><br><span class="line"> </span><br><span class="line">interface Ethernet1/1</span><br><span class="line"> ip address 24.1.1.2 255.255.255.0</span><br><span class="line"> ip nat inside</span><br><span class="line">  </span><br><span class="line">interface FastEthernet1/3</span><br><span class="line"> ip address 23.1.1.2 255.255.255.0</span><br><span class="line"> ip nat inside</span><br><span class="line"> </span><br><span class="line">router ospf 10</span><br><span class="line"> network 23.1.1.0 0.0.0.255 area 0</span><br><span class="line"> network 24.1.1.0 0.0.0.255 area 0</span><br><span class="line"></span><br><span class="line">ip route 0.0.0.0 0.0.0.0 12.1.1.1</span><br><span class="line">ip route 0.0.0.0 0.0.0.0 23.1.1.3 50</span><br><span class="line"></span><br><span class="line">access-list 1 permit 192.168.10.0 0.0.0.255 </span><br><span class="line">access-list 1 permit 192.168.100.0 0.0.0.255 </span><br><span class="line"></span><br><span class="line">ip nat inside source list 1 interface Ethernet1/0 overload</span><br><span class="line"></span><br><span class="line"># to-out-R2&#x7684;&#x914D;&#x7F6E;&#x5982;&#x4E0B;&#xFF1A;</span><br><span class="line">interface Ethernet1/0</span><br><span class="line"> ip address 13.1.1.3 255.255.255.0</span><br><span class="line"> ip nat outside</span><br><span class="line"> </span><br><span class="line">interface Ethernet1/1</span><br><span class="line"> ip address 35.1.1.3 255.255.255.0</span><br><span class="line"> ip nat inside</span><br><span class="line">  </span><br><span class="line">interface FastEthernet1/3</span><br><span class="line"> ip address 23.1.1.3 255.255.255.0</span><br><span class="line"> ip nat inside</span><br><span class="line"> </span><br><span class="line">router ospf 10</span><br><span class="line"> network 23.1.1.0 0.0.0.255 area 0</span><br><span class="line"> network 35.1.1.0 0.0.0.255 area 0</span><br><span class="line"></span><br><span class="line">ip route 0.0.0.0 0.0.0.0 13.1.1.1</span><br><span class="line">ip route 0.0.0.0 0.0.0.0 23.1.1.2 50</span><br><span class="line"></span><br><span class="line">access-list 1 permit 192.168.10.0 0.0.0.255 </span><br><span class="line">access-list 1 permit 192.168.100.0 0.0.0.255 </span><br><span class="line"></span><br><span class="line">ip nat inside source list 1 interface Ethernet1/0 overload</span><br></pre></td></tr></table></figure>

<p>internet-R&#x914D;&#x7F6E;&#x5982;&#x4E0B;&#xFF1A;</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">interface Loopback1</span><br><span class="line"> ip address 1.1.1.1 255.255.255.0</span><br><span class="line"> </span><br><span class="line">interface Ethernet1/0</span><br><span class="line"> ip address 12.1.1.1 255.255.255.0</span><br><span class="line"> </span><br><span class="line">interface Ethernet1/0</span><br><span class="line"> ip address 13.1.1.1 255.255.255.0</span><br></pre></td></tr></table></figure>

<p>&#x6D4B;&#x8BD5;&#x7ED3;&#x679C;&#x5982;&#x4E0B;&#x56FE;&#x6240;&#x793A;&#xFF1A;</p>
<p>&#x200B;    &#x7565;</p>
<h2 id="1-5&#x3001;&#x9879;&#x76EE;&#x603B;&#x7ED3;"><a href="#1-5&#x3001;&#x9879;&#x76EE;&#x603B;&#x7ED3;" class="headerlink" title="1.5&#x3001;&#x9879;&#x76EE;&#x603B;&#x7ED3;"></a>1.5&#x3001;&#x9879;&#x76EE;&#x603B;&#x7ED3;</h2><p>&#x200B;    &#x7565;</p>
]]></content>
      <categories>
        <category>network</category>
      </categories>
      <tags>
        <tag>vlan trunk</tag>
        <tag>stp</tag>
        <tag>vrrp hsrp</tag>
        <tag>静态路由 浮动路由</tag>
        <tag>ospf</tag>
        <tag>snat</tag>
      </tags>
  </entry>
</search>
